var Ia=Object.defineProperty;var ja=(e,t,r)=>t in e?Ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Tr=(e,t,r)=>ja(e,typeof t!="symbol"?t+"":t,r);const Ra="5";var Bn;typeof window<"u"&&((Bn=window.__svelte??(window.__svelte={})).v??(Bn.v=new Set)).add(Ra);let St=!1,Na=!1;function za(){St=!0}za();const Wr=1,Gr=2,Hn=4,Fa=8,Ba=16,Ha=1,qa=2,Va=4,Wa=8,Ga=16,Ua=1,Ya=2,de=Symbol(),Ja="http://www.w3.org/1999/xhtml",hn=!1;var Ct=Array.isArray,Ka=Array.prototype.indexOf,Ur=Array.from,qn=Object.defineProperty,at=Object.getOwnPropertyDescriptor,Vn=Object.getOwnPropertyDescriptors,Xa=Object.prototype,Za=Array.prototype,Yr=Object.getPrototypeOf,bn=Object.isExtensible;function It(e){return typeof e=="function"}const _e=()=>{};function Qa(e){return e()}function Wt(e){for(var t=0;t<e.length;t++)e[t]()}const Me=2,Jr=4,Zt=8,Kr=16,Ke=32,Tt=64,Xr=128,Ee=256,fr=512,pe=1024,qe=2048,Xe=4096,Ye=8192,wr=16384,Wn=32768,Qt=65536,_n=1<<17,$a=1<<18,Gn=1<<19,Ir=1<<20,Zr=1<<21,He=Symbol("$state"),Un=Symbol("legacy props"),eo=Symbol(""),Yn=new class extends Error{constructor(){super(...arguments);Tr(this,"name","StaleReactionError");Tr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Jn(e){return e===this.v}function Qr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Kn(e){return!Qr(e,this.v)}function to(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function no(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ao(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oo(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function so(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function io(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function lo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function uo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function xr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Z=null;function pn(e){Z=e}function ae(e,t=!1,r){var n=Z={p:Z,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};St&&!t&&(Z.l={s:null,u:null,r1:[],r2:Gt(!1)}),kr(()=>{n.d=!0})}function oe(e){const t=Z;if(t!==null){const i=t.e;if(i!==null){var r=K,n=Y;t.e=null;try{for(var a=0;a<i.length;a++){var o=i[a];st(o.effect),Ve(o.reaction),aa(o.fn)}}finally{st(r),Ve(n)}}Z=t.p,t.m=!0}return{}}function $t(){return!St||Z!==null&&Z.l===null}function rt(e){if(typeof e!="object"||e===null||He in e)return e;const t=Yr(e);if(t!==Xa&&t!==Za)return e;var r=new Map,n=Ct(e),a=J(0),o=Y,i=s=>{var l=Y;Ve(o);var u=s();return Ve(l),u};return n&&r.set("length",J(e.length)),new Proxy(e,{defineProperty(s,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&io();var f=r.get(l);return f===void 0?f=i(()=>{var v=J(u.value);return r.set(l,v),v}):C(f,u.value,!0),!0},deleteProperty(s,l){var u=r.get(l);if(u===void 0){if(l in s){const d=i(()=>J(de));r.set(l,d),Dr(a)}}else{if(n&&typeof l=="string"){var f=r.get("length"),v=Number(l);Number.isInteger(v)&&v<f.v&&C(f,v)}C(u,de),Dr(a)}return!0},get(s,l,u){var m;if(l===He)return e;var f=r.get(l),v=l in s;if(f===void 0&&(!v||(m=at(s,l))!=null&&m.writable)&&(f=i(()=>{var g=rt(v?s[l]:de),_=J(g);return _}),r.set(l,f)),f!==void 0){var d=c(f);return d===de?void 0:d}return Reflect.get(s,l,u)},getOwnPropertyDescriptor(s,l){var u=Reflect.getOwnPropertyDescriptor(s,l);if(u&&"value"in u){var f=r.get(l);f&&(u.value=c(f))}else if(u===void 0){var v=r.get(l),d=v==null?void 0:v.v;if(v!==void 0&&d!==de)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(s,l){var d;if(l===He)return!0;var u=r.get(l),f=u!==void 0&&u.v!==de||Reflect.has(s,l);if(u!==void 0||K!==null&&(!f||(d=at(s,l))!=null&&d.writable)){u===void 0&&(u=i(()=>{var m=f?rt(s[l]):de,g=J(m);return g}),r.set(l,u));var v=c(u);if(v===de)return!1}return f},set(s,l,u,f){var P;var v=r.get(l),d=l in s;if(n&&l==="length")for(var m=u;m<v.v;m+=1){var g=r.get(m+"");g!==void 0?C(g,de):m in s&&(g=i(()=>J(de)),r.set(m+"",g))}if(v===void 0)(!d||(P=at(s,l))!=null&&P.writable)&&(v=i(()=>J(void 0)),C(v,rt(u)),r.set(l,v));else{d=v.v!==de;var _=i(()=>rt(u));C(v,_)}var x=Reflect.getOwnPropertyDescriptor(s,l);if(x!=null&&x.set&&x.set.call(f,u),!d){if(n&&typeof l=="string"){var L=r.get("length"),j=Number(l);Number.isInteger(j)&&j>=L.v&&C(L,j+1)}Dr(a)}return!0},ownKeys(s){c(a);var l=Reflect.ownKeys(s).filter(v=>{var d=r.get(v);return d===void 0||d.v!==de});for(var[u,f]of r)f.v!==de&&!(u in s)&&l.push(u);return l},setPrototypeOf(){lo()}})}function Dr(e,t=1){C(e,e.v+t)}function wn(e){try{if(e!==null&&typeof e=="object"&&He in e)return e[He]}catch{}return e}function co(e,t){return Object.is(wn(e),wn(t))}function er(e){var t=Me|qe,r=Y!==null&&(Y.f&Me)!==0?Y:null;return K===null||r!==null&&(r.f&Ee)!==0?t|=Ee:K.f|=Gn,{ctx:Z,deps:null,effects:null,equals:Jn,f:t,fn:e,reactions:null,rv:0,v:de,wv:0,parent:r??K,ac:null}}function W(e){const t=er(e);return ma(t),t}function Xn(e){const t=er(e);return t.equals=Kn,t}function Zn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Je(t[r])}}function fo(e){for(var t=e.parent;t!==null;){if((t.f&Me)===0)return t;t=t.parent}return null}function $r(e){var t,r=K;st(fo(e));try{Zn(e),t=ba(e)}finally{st(r)}return t}function Qn(e){var t=$r(e);if(e.equals(t)||(e.v=t,e.wv=ga()),!ot){var r=(nt||(e.f&Ee)!==0)&&e.deps!==null?Xe:pe;De(e,r)}}const ht=new Map;function Gt(e,t){var r={f:0,v:e,reactions:null,equals:Jn,rv:0,wv:0};return r}function J(e,t){const r=Gt(e);return ma(r),r}function Nt(e,t=!1,r=!0){var a;const n=Gt(e);return t||(n.equals=Kn),St&&r&&Z!==null&&Z.l!==null&&((a=Z.l).s??(a.s=[])).push(n),n}function C(e,t,r=!1){Y!==null&&(!ze||(Y.f&_n)!==0)&&$t()&&(Y.f&(Me|Kr|_n))!==0&&!((re==null?void 0:re.reaction)===Y&&re.sources.includes(e))&&uo();let n=r?rt(t):t;return jr(e,n)}function jr(e,t){if(!e.equals(t)){var r=e.v;ot?ht.set(e,t):ht.set(e,r),e.v=t,(e.f&Me)!==0&&((e.f&qe)!==0&&$r(e),De(e,(e.f&Ee)===0?pe:Xe)),e.wv=ga(),$n(e,qe),$t()&&K!==null&&(K.f&pe)!==0&&(K.f&(Ke|Tt))===0&&(Ce===null?Mo([e]):Ce.push(e))}return t}function $n(e,t){var r=e.reactions;if(r!==null)for(var n=$t(),a=r.length,o=0;o<a;o++){var i=r[o],s=i.f;(s&qe)===0&&(!n&&i===K||(De(i,t),(s&(pe|Ee))!==0&&((s&Me)!==0?$n(i,Xe):Mr(i))))}}function vo(e){console.warn("https://svelte.dev/e/legacy_recursive_reactive_block")}function mo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let go=!1;var Rr,ea,ta,ra;function ho(){if(Rr===void 0){Rr=window,ea=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ta=at(t,"firstChild").get,ra=at(t,"nextSibling").get,bn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bn(r)&&(r.__t=void 0)}}function yr(e=""){return document.createTextNode(e)}function Fe(e){return ta.call(e)}function Ar(e){return ra.call(e)}function h(e,t){return Fe(e)}function te(e,t){{var r=Fe(e);return r instanceof Comment&&r.data===""?Ar(r):r}}function k(e,t=1,r=!1){let n=e;for(;t--;)n=Ar(n);return n}function bo(e){e.textContent=""}function na(e){K===null&&Y===null&&no(),Y!==null&&(Y.f&Ee)!==0&&K===null&&ro(),ot&&to()}function _o(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function it(e,t,r,n=!0){var a=K,o={ctx:Z,deps:null,nodes_start:null,nodes_end:null,f:e|qe,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Er(o),o.f|=Wn}catch(l){throw Je(o),l}else t!==null&&Mr(o);var i=r&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(Gn|Xr))===0;if(!i&&n&&(a!==null&&_o(o,a),Y!==null&&(Y.f&Me)!==0)){var s=Y;(s.effects??(s.effects=[])).push(o)}return o}function kr(e){const t=it(Zt,null,!1);return De(t,pe),t.teardown=e,t}function Ut(e){na();var t=K!==null&&(K.f&Ke)!==0&&Z!==null&&!Z.m;if(t){var r=Z;(r.e??(r.e=[])).push({fn:e,effect:K,reaction:Y})}else return aa(e)}function aa(e){return it(Jr|Zr,e,!1)}function oa(e){return na(),it(Zt|Zr,e,!0)}function po(e){const t=it(Tt,e,!0);return(r={})=>new Promise(n=>{r.outro?Yt(t,()=>{Je(t),n(void 0)}):(Je(t),n(void 0))})}function en(e){return it(Jr,e,!1)}function wo(e,t){var r=Z,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=tr(()=>{e(),!n.ran&&(n.ran=!0,C(r.l.r2,!0),Ze(t))})}function xo(){var e=Z;tr(()=>{if(c(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&pe)!==0&&De(r,Xe),nr(r)&&Er(r),t.ran=!1}e.l.r2.v=!1}})}function tr(e){return it(Zt,e,!0)}function G(e,t=[],r=er){const n=t.map(r);return rr(()=>e(...n.map(c)))}function rr(e,t=0){var r=it(Zt|Kr|t,e,!0);return r}function pt(e,t=!0){return it(Zt|Ke,e,!0,t)}function sa(e){var t=e.teardown;if(t!==null){const r=ot,n=Y;xn(!0),Ve(null);try{t.call(null)}finally{xn(r),Ve(n)}}}function ia(e,t=!1){var a;var r=e.first;for(e.first=e.last=null;r!==null;){(a=r.ac)==null||a.abort(Yn);var n=r.next;(r.f&Tt)!==0?r.parent=null:Je(r,t),r=n}}function yo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ke)===0&&Je(t),t=r}}function Je(e,t=!0){var r=!1;(t||(e.f&$a)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(la(e.nodes_start,e.nodes_end),r=!0),ia(e,t&&!r),hr(e,0),De(e,wr);var n=e.transitions;if(n!==null)for(const o of n)o.stop();sa(e);var a=e.parent;a!==null&&a.first!==null&&ua(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function la(e,t){for(;e!==null;){var r=e===t?null:Ar(e);e.remove(),e=r}}function ua(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Yt(e,t){var r=[];tn(e,r,!0),ca(r,()=>{Je(e),t&&t()})}function ca(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var a of e)a.out(n)}else t()}function tn(e,t,r){if((e.f&Ye)===0){if(e.f^=Ye,e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&t.push(i);for(var n=e.first;n!==null;){var a=n.next,o=(n.f&Qt)!==0||(n.f&Ke)!==0;tn(n,t,o?r:!1),n=a}}}function vr(e){da(e,!0)}function da(e,t){if((e.f&Ye)!==0){e.f^=Ye;for(var r=e.first;r!==null;){var n=r.next,a=(r.f&Qt)!==0||(r.f&Ke)!==0;da(r,a?t:!1),r=n}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Jt=[],Nr=[];function fa(){var e=Jt;Jt=[],Wt(e)}function Ao(){var e=Nr;Nr=[],Wt(e)}function rn(e){Jt.length===0&&queueMicrotask(fa),Jt.push(e)}function ko(){Jt.length>0&&fa(),Nr.length>0&&Ao()}function Eo(e){var t=K;if((t.f&Wn)===0){if((t.f&Xr)===0)throw e;t.fn(e)}else va(e,t)}function va(e,t){for(;t!==null;){if((t.f&Xr)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let Kt=!1,Xt=null,bt=!1,ot=!1;function xn(e){ot=e}let zt=[];let Y=null,ze=!1;function Ve(e){Y=e}let K=null;function st(e){K=e}let re=null;function ma(e){Y!==null&&Y.f&Ir&&(re===null?re={reaction:Y,sources:[e]}:re.sources.push(e))}let ge=null,Ae=0,Ce=null;function Mo(e){Ce=e}let mr=1,gr=0,nt=!1;function ga(){return++mr}function nr(e){var v;var t=e.f;if((t&qe)!==0)return!0;if((t&Xe)!==0){var r=e.deps,n=(t&Ee)!==0;if(r!==null){var a,o,i=(t&fr)!==0,s=n&&K!==null&&!nt,l=r.length;if(i||s){var u=e,f=u.parent;for(a=0;a<l;a++)o=r[a],(i||!((v=o==null?void 0:o.reactions)!=null&&v.includes(u)))&&(o.reactions??(o.reactions=[])).push(u);i&&(u.f^=fr),s&&f!==null&&(f.f&Ee)===0&&(u.f^=Ee)}for(a=0;a<l;a++)if(o=r[a],nr(o)&&Qn(o),o.wv>e.wv)return!0}(!n||K!==null&&!nt)&&De(e,pe)}return!1}function ha(e,t,r=!0){var n=e.reactions;if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];(re==null?void 0:re.reaction)===Y&&re.sources.includes(e)||((o.f&Me)!==0?ha(o,t,!1):t===o&&(r?De(o,qe):(o.f&pe)!==0&&De(o,Xe),Mr(o)))}}function ba(e){var m;var t=ge,r=Ae,n=Ce,a=Y,o=nt,i=re,s=Z,l=ze,u=e.f;ge=null,Ae=0,Ce=null,nt=(u&Ee)!==0&&(ze||!bt||Y===null),Y=(u&(Ke|Tt))===0?e:null,re=null,pn(e.ctx),ze=!1,++gr,e.f|=Ir,e.ac!==null&&(e.ac.abort(Yn),e.ac=null);try{var f=(0,e.fn)(),v=e.deps;if(ge!==null){var d;if(hr(e,Ae),v!==null&&Ae>0)for(v.length=Ae+ge.length,d=0;d<ge.length;d++)v[Ae+d]=ge[d];else e.deps=v=ge;if(!nt||(u&Me)!==0&&e.reactions!==null)for(d=Ae;d<v.length;d++)((m=v[d]).reactions??(m.reactions=[])).push(e)}else v!==null&&Ae<v.length&&(hr(e,Ae),v.length=Ae);if($t()&&Ce!==null&&!ze&&v!==null&&(e.f&(Me|Xe|qe))===0)for(d=0;d<Ce.length;d++)ha(Ce[d],e);return a!==null&&a!==e&&(gr++,Ce!==null&&(n===null?n=Ce:n.push(...Ce))),f}catch(g){Eo(g)}finally{ge=t,Ae=r,Ce=n,Y=a,nt=o,re=i,pn(s),ze=l,e.f^=Ir}}function So(e,t){let r=t.reactions;if(r!==null){var n=Ka.call(r,e);if(n!==-1){var a=r.length-1;a===0?r=t.reactions=null:(r[n]=r[a],r.pop())}}r===null&&(t.f&Me)!==0&&(ge===null||!ge.includes(t))&&(De(t,Xe),(t.f&(Ee|fr))===0&&(t.f^=fr),Zn(t),hr(t,0))}function hr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)So(e,r[n])}function Er(e){var t=e.f;if((t&wr)===0){De(e,pe);var r=K,n=bt;K=e,bt=!0;try{(t&Kr)!==0?yo(e):ia(e),sa(e);var a=ba(e);e.teardown=typeof a=="function"?a:null,e.wv=mr;var o;hn&&Na&&(e.f&qe)!==0&&e.deps}finally{bt=n,K=r}}}function Co(){try{ao()}catch(e){if(Xt!==null)va(e,Xt);else throw e}}function _a(){var e=bt;try{var t=0;for(bt=!0;zt.length>0;){t++>1e3&&Co();var r=zt,n=r.length;zt=[];for(var a=0;a<n;a++){var o=Do(r[a]);To(o)}ht.clear()}}finally{Kt=!1,bt=e,Xt=null}}function To(e){var t=e.length;if(t!==0){for(var r=0;r<t;r++){var n=e[r];if((n.f&(wr|Ye))===0&&nr(n)){var a=mr;if(Er(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?ua(n):n.fn=null),mr>a&&(n.f&Zr)!==0)break}}for(;r<t;r+=1)Mr(e[r])}}function Mr(e){Kt||(Kt=!0,queueMicrotask(_a));for(var t=Xt=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Tt|Ke))!==0){if((r&pe)===0)return;t.f^=pe}}zt.push(t)}function Do(e){for(var t=[],r=e;r!==null;){var n=r.f,a=(n&(Ke|Tt))!==0,o=a&&(n&pe)!==0;if(!o&&(n&Ye)===0){(n&Jr)!==0?t.push(r):a?r.f^=pe:nr(r)&&Er(r);var i=r.first;if(i!==null){r=i;continue}}var s=r.parent;for(r=r.next;r===null&&s!==null;)r=s.next,s=s.parent}return t}function Lo(e){for(var t;;){if(ko(),zt.length===0)return Kt=!1,Xt=null,t;Kt=!0,_a()}}async function Oo(){await Promise.resolve(),Lo()}function c(e){var t=e.f,r=(t&Me)!==0;if(Y!==null&&!ze){if((re==null?void 0:re.reaction)!==Y||!(re!=null&&re.sources.includes(e))){var n=Y.deps;e.rv<gr&&(e.rv=gr,ge===null&&n!==null&&n[Ae]===e?Ae++:ge===null?ge=[e]:(!nt||!ge.includes(e))&&ge.push(e))}}else if(r&&e.deps===null&&e.effects===null){var a=e,o=a.parent;o!==null&&(o.f&Ee)===0&&(a.f^=Ee)}if(r&&!ot&&(a=e,nr(a)&&Qn(a)),ot){if(ht.has(e))return ht.get(e);if(r){a=e;var i=a.v;return((a.f&pe)!==0||pa(a))&&(i=$r(a)),ht.set(a,i),i}}return e.v}function pa(e){if(e.v===de)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ht.has(t)||(t.f&Me)!==0&&pa(t))return!0;return!1}function Ze(e){var t=ze;try{return ze=!0,e()}finally{ze=t}}const Po=-7169;function De(e,t){e.f=e.f&Po|t}function nn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(He in e)zr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&He in r&&zr(r)}}}function zr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{zr(e[n],t)}catch{}const r=Yr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Vn(r);for(let a in n){const o=n[a].get;if(o)try{o.call(e)}catch{}}}}}let yn=!1;function Io(){yn||(yn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function wa(e){var t=Y,r=K;Ve(null),st(null);try{return e()}finally{Ve(t),st(r)}}function xa(e,t,r,n=r){e.addEventListener(t,()=>wa(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),Io()}const ya=new Set,Fr=new Set;function jo(e,t,r,n={}){function a(o){if(n.capture||jt.call(t,o),!o.cancelBubble)return wa(()=>r==null?void 0:r.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?rn(()=>{t.addEventListener(e,a,n)}):t.addEventListener(e,a,n),a}function br(e,t,r,n,a){var o={capture:n,passive:a},i=jo(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&kr(()=>{t.removeEventListener(e,i,o)})}function lt(e){for(var t=0;t<e.length;t++)ya.add(e[t]);for(var r of Fr)r(e)}function jt(e){var j;var t=this,r=t.ownerDocument,n=e.type,a=((j=e.composedPath)==null?void 0:j.call(e))||[],o=a[0]||e.target,i=0,s=e.__root;if(s){var l=a.indexOf(s);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=a.indexOf(t);if(u===-1)return;l<=u&&(i=l)}if(o=a[i]||e.target,o!==t){qn(e,"currentTarget",{configurable:!0,get(){return o||r}});var f=Y,v=K;Ve(null),st(null);try{for(var d,m=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+n];if(_!=null&&(!o.disabled||e.target===o))if(Ct(_)){var[x,...L]=_;x.apply(o,[e,...L])}else _.call(o,e)}catch(P){d?m.push(P):d=P}if(e.cancelBubble||g===t||g===null)break;o=g}if(d){for(let P of m)queueMicrotask(()=>{throw P});throw d}}finally{e.__root=t,delete e.currentTarget,Ve(f),st(v)}}}function an(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Mt(e,t){var r=K;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function R(e,t){var r=(t&Ua)!==0,n=(t&Ya)!==0,a,o=!e.startsWith("<!>");return()=>{a===void 0&&(a=an(o?e:"<!>"+e),r||(a=Fe(a)));var i=n||ea?document.importNode(a,!0):a.cloneNode(!0);if(r){var s=Fe(i),l=i.lastChild;Mt(s,l)}else Mt(i,i);return i}}function Ro(e,t,r="svg"){var n=!e.startsWith("<!>"),a=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var i=an(a),s=Fe(i);o=Fe(s)}var l=o.cloneNode(!0);return Mt(l,l),l}}function on(e,t){return Ro(e,t,"svg")}function An(e=""){{var t=yr(e+"");return Mt(t,t),t}}function se(){var e=document.createDocumentFragment(),t=document.createComment(""),r=yr();return e.append(t,r),Mt(t,r),e}function D(e,t){e!==null&&e.before(t)}const No=["touchstart","touchmove"];function zo(e){return No.includes(e)}function U(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function sn(e,t){return Fo(e,t)}const kt=new Map;function Fo(e,{target:t,anchor:r,props:n={},events:a,context:o,intro:i=!0}){ho();var s=new Set,l=v=>{for(var d=0;d<v.length;d++){var m=v[d];if(!s.has(m)){s.add(m);var g=zo(m);t.addEventListener(m,jt,{passive:g});var _=kt.get(m);_===void 0?(document.addEventListener(m,jt,{passive:g}),kt.set(m,1)):kt.set(m,_+1)}}};l(Ur(ya)),Fr.add(l);var u=void 0,f=po(()=>{var v=r??t.appendChild(yr());return pt(()=>{if(o){ae({});var d=Z;d.c=o}a&&(n.$$events=a),u=e(v,n)||{},o&&oe()}),()=>{var g;for(var d of s){t.removeEventListener(d,jt);var m=kt.get(d);--m===0?(document.removeEventListener(d,jt),kt.delete(d)):kt.set(d,m)}Fr.delete(l),v!==r&&((g=v.parentNode)==null||g.removeChild(v))}});return Br.set(u,f),u}let Br=new WeakMap;function Aa(e,t){const r=Br.get(e);return r?(Br.delete(e),r(t)):Promise.resolve()}function Dt(e,t,...r){var n=e,a=_e,o;rr(()=>{a!==(a=t())&&(o&&(Je(o),o=null),o=pt(()=>a(n,...r)))},Qt)}function ar(e){Z===null&&xr(),St&&Z.l!==null?Ea(Z).m.push(e):Ut(()=>{const t=Ze(e);if(typeof t=="function")return t})}function ka(e){Z===null&&xr(),ar(()=>()=>Ze(e))}function Bo(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function ln(){const e=Z;return e===null&&xr(),(t,r,n)=>{var o;const a=(o=e.s.$$events)==null?void 0:o[t];if(a){const i=Ct(a)?a.slice():[a],s=Bo(t,r,n);for(const l of i)l.call(e.x,s);return!s.defaultPrevented}return!0}}function Ho(e){Z===null&&xr(),Z.l===null&&oo(),Ea(Z).a.push(e)}function Ea(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}function ee(e,t,[r,n]=[0,0]){var a=e,o=null,i=null,s=de,l=r>0?Qt:0,u=!1;const f=(d,m=!0)=>{u=!0,v(m,d)},v=(d,m)=>{s!==(s=d)&&(s?(o?vr(o):m&&(o=pt(()=>m(a))),i&&Yt(i,()=>{i=null})):(i?vr(i):m&&(i=pt(()=>m(a,[r+1,n]))),o&&Yt(o,()=>{o=null})))};rr(()=>{u=!1,t(f),u||v(null,null)},l)}function Be(e,t){return t}function qo(e,t,r,n){for(var a=[],o=t.length,i=0;i<o;i++)tn(t[i].e,a,!0);var s=o>0&&a.length===0&&r!==null;if(s){var l=r.parentNode;bo(l),l.append(r),n.clear(),$e(e,t[0].prev,t[o-1].next)}ca(a,()=>{for(var u=0;u<o;u++){var f=t[u];s||(n.delete(f.k),$e(e,f.prev,f.next)),Je(f.e,!s)}})}function ke(e,t,r,n,a,o=null){var i=e,s={flags:t,items:new Map,first:null},l=(t&Hn)!==0;if(l){var u=e;i=u.appendChild(yr())}var f=null,v=!1,d=Xn(()=>{var m=r();return Ct(m)?m:m==null?[]:Ur(m)});rr(()=>{var m=c(d),g=m.length;v&&g===0||(v=g===0,Vo(m,s,i,a,t,n,r),o!==null&&(g===0?f?vr(f):f=pt(()=>o(i)):f!==null&&Yt(f,()=>{f=null})),c(d))})}function Vo(e,t,r,n,a,o,i){var O,V,q,Q;var s=(a&Fa)!==0,l=(a&(Wr|Gr))!==0,u=e.length,f=t.items,v=t.first,d=v,m,g=null,_,x=[],L=[],j,P,S,p;if(s)for(p=0;p<u;p+=1)j=e[p],P=o(j,p),S=f.get(P),S!==void 0&&((O=S.a)==null||O.measure(),(_??(_=new Set)).add(S));for(p=0;p<u;p+=1){if(j=e[p],P=o(j,p),S=f.get(P),S===void 0){var E=d?d.e.nodes_start:r;g=Go(E,t,g,g===null?t.first:g.next,j,P,p,n,a,i),f.set(P,g),x=[],L=[],d=g.next;continue}if(l&&Wo(S,j,p,a),(S.e.f&Ye)!==0&&(vr(S.e),s&&((V=S.a)==null||V.unfix(),(_??(_=new Set)).delete(S))),S!==d){if(m!==void 0&&m.has(S)){if(x.length<L.length){var w=L[0],A;g=w.prev;var T=x[0],I=x[x.length-1];for(A=0;A<x.length;A+=1)kn(x[A],w,r);for(A=0;A<L.length;A+=1)m.delete(L[A]);$e(t,T.prev,I.next),$e(t,g,T),$e(t,I,w),d=w,g=I,p-=1,x=[],L=[]}else m.delete(S),kn(S,d,r),$e(t,S.prev,S.next),$e(t,S,g===null?t.first:g.next),$e(t,g,S),g=S;continue}for(x=[],L=[];d!==null&&d.k!==P;)(d.e.f&Ye)===0&&(m??(m=new Set)).add(d),L.push(d),d=d.next;if(d===null)continue;S=d}x.push(S),g=S,d=S.next}if(d!==null||m!==void 0){for(var N=m===void 0?[]:Ur(m);d!==null;)(d.e.f&Ye)===0&&N.push(d),d=d.next;var B=N.length;if(B>0){var y=(a&Hn)!==0&&u===0?r:null;if(s){for(p=0;p<B;p+=1)(q=N[p].a)==null||q.measure();for(p=0;p<B;p+=1)(Q=N[p].a)==null||Q.fix()}qo(t,N,y,f)}}s&&rn(()=>{var $;if(_!==void 0)for(S of _)($=S.a)==null||$.apply()}),K.first=t.first&&t.first.e,K.last=g&&g.e}function Wo(e,t,r,n){(n&Wr)!==0&&jr(e.v,t),(n&Gr)!==0?jr(e.i,r):e.i=r}function Go(e,t,r,n,a,o,i,s,l,u){var f=(l&Wr)!==0,v=(l&Ba)===0,d=f?v?Nt(a,!1,!1):Gt(a):a,m=(l&Gr)===0?i:Gt(i),g={i:m,v:d,k:o,a:null,e:null,prev:r,next:n};try{return g.e=pt(()=>s(e,d,m,u),go),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function kn(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==n;){var i=Ar(o);a.before(o),o=i}}function $e(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Uo(e,t,r=!1,n=!1,a=!1){var o=e,i="";G(()=>{var s=K;if(i!==(i=t()??"")&&(s.nodes_start!==null&&(la(s.nodes_start,s.nodes_end),s.nodes_start=s.nodes_end=null),i!=="")){var l=i+"";r?l=`<svg>${l}</svg>`:n&&(l=`<math>${l}</math>`);var u=an(l);if((r||n)&&(u=Fe(u)),Mt(Fe(u),u.lastChild),r||n)for(;Fe(u);)o.before(Fe(u));else o.before(u)}})}function En(e,t,r){var n=e,a,o;rr(()=>{a!==(a=t())&&(o&&(Yt(o),o=null),a&&(o=pt(()=>r(n,a))))},Qt)}function _t(e,t,r){en(()=>{var n=Ze(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var a=!1,o={};tr(()=>{var i=r();nn(i),a&&Qr(o,i)&&(o=i,n.update(i))}),a=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function Ma(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ma(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Yo(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ma(e))&&(n&&(n+=" "),n+=t);return n}function Mn(e){return typeof e=="object"?Yo(e):e??""}const Sn=[...` 	
\r\f \v\uFEFF`];function Jo(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var o=a.length,i=0;(i=n.indexOf(a,i))>=0;){var s=i+o;(i===0||Sn.includes(n[i-1]))&&(s===n.length||Sn.includes(n[s]))?n=(i===0?"":n.substring(0,i))+n.substring(s+1):i=s}}return n===""?null:n}function Ko(e,t){return e==null?null:String(e)}function je(e,t,r,n,a,o){var i=e.__className;if(i!==r||i===void 0){var s=Jo(r,n,o);s==null?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s),e.__className=r}else if(o&&a!==o)for(var l in o){var u=!!o[l];(a==null||u!==!!a[l])&&e.classList.toggle(l,u)}return o}function Xo(e,t,r,n){var a=e.__style;if(a!==t){var o=Ko(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return n}function Sa(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ct(t))return mo();for(var n of e.options)n.selected=t.includes(Ft(n));return}for(n of e.options){var a=Ft(n);if(co(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Zo(e){var t=new MutationObserver(()=>{Sa(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),kr(()=>{t.disconnect()})}function Qo(e,t,r=t){var n=!0;xa(e,"change",a=>{var o=a?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(o),Ft);else{var s=e.querySelector(o)??e.querySelector("option:not([disabled])");i=s&&Ft(s)}r(i)}),en(()=>{var a=t();if(Sa(e,a,n),n&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=Ft(o),r(a))}e.__value=a,n=!1}),Zo(e)}function Ft(e){return"__value"in e?e.__value:e.value}const $o=Symbol("is custom element"),es=Symbol("is html");function ve(e,t,r,n){var a=ts(e);a[t]!==(a[t]=r)&&(t==="loading"&&(e[eo]=r),r==null?e.removeAttribute(t):typeof r!="string"&&rs(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ts(e){return e.__attributes??(e.__attributes={[$o]:e.nodeName.includes("-"),[es]:e.namespaceURI===Ja})}var Cn=new Map;function rs(e){var t=Cn.get(e.nodeName);if(t)return t;Cn.set(e.nodeName,t=[]);for(var r,n=e,a=Element.prototype;a!==n;){r=Vn(n);for(var o in r)r[o].set&&t.push(o);n=Yr(n)}return t}function Hr(e,t,r=t){var n=$t();xa(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=Lr(e)?Or(o):o,r(o),n&&o!==(o=t())){var i=e.selectionStart,s=e.selectionEnd;e.value=o??"",s!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(s,e.value.length))}}),Ze(t)==null&&e.value&&r(Lr(e)?Or(e.value):e.value),tr(()=>{var a=t();Lr(e)&&a===Or(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Lr(e){var t=e.type;return t==="number"||t==="range"}function Or(e){return e===""?null:+e}function Tn(e,t){return e===t||(e==null?void 0:e[He])===t}function ns(e={},t,r,n){return en(()=>{var a,o;return tr(()=>{a=o,o=[],Ze(()=>{e!==r(...o)&&(t(e,...o),a&&Tn(r(...a),e)&&t(null,...a))})}),()=>{rn(()=>{o&&Tn(r(...o),e)&&t(null,...o)})}}),e}function as(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function os(e=!1){const t=Z,r=t.l.u;if(!r)return;let n=()=>nn(t.s);if(e){let a=0,o={};const i=er(()=>{let s=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],s=!0);return s&&a++,a});n=()=>c(i)}r.b.length&&oa(()=>{Dn(t,n),Wt(r.b)}),Ut(()=>{const a=Ze(()=>r.m.map(Qa));return()=>{for(const o of a)typeof o=="function"&&o()}}),r.a.length&&Ut(()=>{Dn(t,n),Wt(r.a)})}function Dn(e,t){if(e.l.s)for(const r of e.l.s)c(r);t()}function Ln(e,t){var o;var r=(o=e.$$events)==null?void 0:o[t.type],n=Ct(r)?r.slice():r==null?[]:[r];for(var a of n)a.call(this,t)}function un(e,t,r){if(e==null)return t(void 0),r&&r(void 0),_e;const n=Ze(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Et=[];function Ca(e,t){return{subscribe:Le(e,t).subscribe}}function Le(e,t=_e){let r=null;const n=new Set;function a(s){if(Qr(e,s)&&(e=s,r)){const l=!Et.length;for(const u of n)u[1](),Et.push(u,e);if(l){for(let u=0;u<Et.length;u+=2)Et[u][0](Et[u+1]);Et.length=0}}}function o(s){a(s(e))}function i(s,l=_e){const u=[s,l];return n.add(u),n.size===1&&(r=t(a,o)||_e),s(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:a,update:o,subscribe:i}}function cn(e,t,r){const n=!Array.isArray(e),a=n?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Ca(r,(i,s)=>{let l=!1;const u=[];let f=0,v=_e;const d=()=>{if(f)return;v();const g=t(n?u[0]:u,i,s);o?i(g):v=typeof g=="function"?g:_e},m=a.map((g,_)=>un(g,x=>{u[_]=x,f&=~(1<<_),l&&d()},()=>{f|=1<<_}));return l=!0,d(),function(){Wt(m),v(),l=!1}})}function Rt(e){let t;return un(e,r=>t=r)(),t}let ir=!1,qr=Symbol();function be(e,t,r){const n=r[t]??(r[t]={store:null,source:Nt(void 0),unsubscribe:_e});if(n.store!==e&&!(qr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=_e;else{var a=!0;n.unsubscribe=un(e,o=>{a?n.source.v=o:C(n.source,o)}),a=!1}return e&&qr in r?Rt(e):c(n.source)}function Sr(){const e={};function t(){kr(()=>{for(var r in e)e[r].unsubscribe();qn(e,qr,{enumerable:!1,value:!0})})}return[e,t]}function ss(e){var t=ir;try{return ir=!1,[e(),ir]}finally{ir=t}}const is={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(It(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let a=e.props[n];It(a)&&(a=a());const o=at(a,t);if(o&&o.set)return o.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(It(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const a=at(n,t);return a&&!a.configurable&&(a.configurable=!0),a}}},has(e,t){if(t===He||t===Un)return!1;for(let r of e.props)if(It(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(It(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function On(...e){return new Proxy({props:e},is)}function b(e,t,r,n){var P;var a=!St||(r&qa)!==0,o=(r&Wa)!==0,i=(r&Ga)!==0,s=n,l=!0,u=()=>(l&&(l=!1,s=i?Ze(n):n),s),f;if(o){var v=He in e||Un in e;f=((P=at(e,t))==null?void 0:P.set)??(v&&t in e?S=>e[t]=S:void 0)}var d,m=!1;o?[d,m]=ss(()=>e[t]):d=e[t],d===void 0&&n!==void 0&&(d=u(),f&&(a&&so(),f(d)));var g;if(a?g=()=>{var S=e[t];return S===void 0?u():(l=!0,S)}:g=()=>{var S=e[t];return S!==void 0&&(s=void 0),S===void 0?s:S},a&&(r&Va)===0)return g;if(f){var _=e.$$legacy;return function(S,p){return arguments.length>0?((!a||!p||_||m)&&f(p?g():S),S):g()}}var x=!1,L=((r&Ha)!==0?er:Xn)(()=>(x=!1,g()));o&&c(L);var j=K;return function(S,p){if(arguments.length>0){const E=p?c(L):a&&o?rt(S):S;return C(L,E),x=!0,s!==void 0&&(s=E),S}return ot&&x||(j.f&wr)!==0?L.v:c(L)}}function ls(e){oa(()=>{e();var t=K;(t.f&qe)!==0&&(vo(),De(t,Xe))})}function us(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,a,o,i=[],s="",l=e.split("/");for(l[0]||l.shift();a=l.shift();)r=a[0],r==="*"?(i.push("wild"),s+="/(.*)"):r===":"?(n=a.indexOf("?",1),o=a.indexOf(".",1),i.push(a.substring(1,~n?n:~o?o:a.length)),s+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~n?"?":"")+"\\"+a.substring(o))):s+="/"+a;return{keys:i,pattern:new RegExp("^"+s+"/?$","i")}}function Pn(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const r=t.indexOf("?");let n="";return r>-1&&(n=t.substr(r+1),t=t.substr(0,r)),{location:t,querystring:n}}const dn=Ca(null,function(t){t(Pn());const r=()=>{t(Pn())};return window.addEventListener("hashchange",r,!1),function(){window.removeEventListener("hashchange",r,!1)}}),cs=cn(dn,e=>e.location);cn(dn,e=>e.querystring);const In=Le(void 0);function Ge(e,t){if(t=Rn(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return jn(e,t),{update(r){r=Rn(r),jn(e,r)}}}function ds(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function jn(e,t){let r=t.href||e.getAttribute("href");if(r&&r.charAt(0)=="/")r="#"+r;else if(!r||r.length<2||r.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+r);e.setAttribute("href",r),e.addEventListener("click",n=>{n.preventDefault(),t.disabled||fs(n.currentTarget.getAttribute("href"))})}function Rn(e){return e&&typeof e=="string"?{href:e}:e||{}}function fs(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=e}function vs(e,t){ae(t,!1);let r=b(t,"routes",24,()=>({})),n=b(t,"prefix",8,""),a=b(t,"restoreScrollState",8,!1);class o{constructor(E,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!E||typeof E=="string"&&(E.length<1||E.charAt(0)!="/"&&E.charAt(0)!="*")||typeof E=="object"&&!(E instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:A,keys:T}=us(E);this.path=E,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=A,this._keys=T}match(E){if(n()){if(typeof n()=="string")if(E.startsWith(n()))E=E.substr(n().length)||"/";else return null;else if(n()instanceof RegExp){const I=E.match(n());if(I&&I[0])E=E.substr(I[0].length)||"/";else return null}}const w=this._pattern.exec(E);if(w===null)return null;if(this._keys===!1)return w;const A={};let T=0;for(;T<this._keys.length;){try{A[this._keys[T]]=decodeURIComponent(w[T+1]||"")||null}catch{A[this._keys[T]]=null}T++}return A}async checkConditions(E){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](E))return!1;return!0}}const i=[];r()instanceof Map?r().forEach((p,E)=>{i.push(new o(E,p))}):Object.keys(r()).forEach(p=>{i.push(new o(p,r()[p]))});let s=Nt(null),l=Nt(null),u=Nt({});const f=ln();async function v(p,E){await Oo(),f(p,E)}let d=null,m=null;a()&&(m=p=>{p.state&&(p.state.__svelte_spa_router_scrollY||p.state.__svelte_spa_router_scrollX)?d=p.state:d=null},window.addEventListener("popstate",m),Ho(()=>{ds(d)}));let g=null,_=null;const x=dn.subscribe(async p=>{g=p;let E=0;for(;E<i.length;){const w=i[E].match(p.location);if(!w){E++;continue}const A={route:i[E].path,location:p.location,querystring:p.querystring,userData:i[E].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await i[E].checkConditions(A)){C(s,null),_=null,v("conditionsFailed",A);return}v("routeLoading",Object.assign({},A));const T=i[E].component;if(_!=T){T.loading?(C(s,T.loading),_=T,C(l,T.loadingParams),C(u,{}),v("routeLoaded",Object.assign({},A,{component:c(s),name:c(s).name,params:c(l)}))):(C(s,null),_=null);const I=await T();if(p!=g)return;C(s,I&&I.default||I),_=T}w&&typeof w=="object"&&Object.keys(w).length?C(l,w):C(l,null),C(u,i[E].props),v("routeLoaded",Object.assign({},A,{component:c(s),name:c(s).name,params:c(l)})).then(()=>{In.set(c(l))});return}C(s,null),_=null,In.set(void 0)});ka(()=>{x(),m&&window.removeEventListener("popstate",m)}),wo(()=>nn(a()),()=>{history.scrollRestoration=a()?"manual":"auto"}),xo(),os();var L=se(),j=te(L);{var P=p=>{var E=se(),w=te(E);En(w,()=>c(s),(A,T)=>{T(A,On({get params(){return c(l)}},()=>c(u),{$$events:{routeEvent(I){Ln.call(this,t,I)}}}))}),D(p,E)},S=p=>{var E=se(),w=te(E);En(w,()=>c(s),(A,T)=>{T(A,On(()=>c(u),{$$events:{routeEvent(I){Ln.call(this,t,I)}}}))}),D(p,E)};ee(j,p=>{c(l)?p(P):p(S,!1)})}D(e,L),oe()}const lr="/api";class ms extends Error{constructor(t,r,n){super(t),this.name="ApiError",this.status=r,this.response=n}}async function ur(e){if(!e.ok){const r=await e.text();throw new ms(`HTTP ${e.status}: ${r}`,e.status,e)}return await e.json()}const Pr={async getMembers(){const e=await fetch(`${lr}/members`);return ur(e)},async getAssignmentData(){const e=await fetch(`${lr}/assignment-data`);return ur(e)},async updateAssignments(e,t,r){const n=await fetch(`${lr}/assignments/${e}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberIds:r})});return ur(n)},async addMember(e){const t=await fetch(`${lr}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return ur(t)}},Bt=Le([]),Te=Le([]),et=Le(!1),tt=Le(null),gs=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],hs=["ouverture","fermeture"];cn(Te,e=>{const t={};return gs.forEach((r,n)=>{t[n]={},hs.forEach(a=>{t[n][a]=e.filter(o=>o.weekday===n&&o.slot_type===a)})}),t});const cr={async loadData(){et.set(!0),tt.set(null);try{const e=await Pr.getAssignmentData();Bt.set(e.members||[]),Te.set(e.assignments||[])}catch(e){console.error("Failed to load assignment data:",e),tt.set("Failed to load assignment data")}finally{et.set(!1)}},async addMemberToSlot(e,t,r){et.set(!0),tt.set(null);try{const n=Rt(Te),a=Rt(Bt),s=[...n.filter(u=>u.weekday===e&&u.slot_type===t).map(u=>u.member_id),r],l=await Pr.updateAssignments(e,t,s);if(l.success){const u=n.filter(f=>!(f.weekday===e&&f.slot_type===t));return s.forEach(f=>{const v=a.find(d=>d.id===f);v&&u.push({weekday:e,slot_type:t,member_id:f,member_name:v.first_name,display_name:v.display_name||v.first_name})}),Te.set(u),{success:!0,warnings:l.warnings}}else throw new Error("Failed to update assignments")}catch(n){throw console.error("Failed to add member to slot:",n),tt.set("Failed to add member to slot"),n}finally{et.set(!1)}},async removeMemberFromSlot(e,t,r){et.set(!0),tt.set(null);try{const n=Rt(Te),a=Rt(Bt),i=n.filter(l=>l.weekday===e&&l.slot_type===t).map(l=>l.member_id).filter(l=>l!==r),s=await Pr.updateAssignments(e,t,i);if(s.success){const l=n.filter(u=>!(u.weekday===e&&u.slot_type===t));return i.forEach(u=>{const f=a.find(v=>v.id===u);f&&l.push({weekday:e,slot_type:t,member_id:u,member_name:f.first_name,display_name:f.display_name||f.first_name})}),Te.set(l),{success:!0,warnings:s.warnings}}else throw new Error("Failed to update assignments")}catch(n){throw console.error("Failed to remove member from slot:",n),tt.set("Failed to remove member from slot"),n}finally{et.set(!1)}}},dr=Le([]),Vr=Le(!1),gt=Le(null),Ht={async loadAbsences(){Vr.set(!0),gt.set(null);try{const e=await fetch("/api/absences");if(!e.ok)throw new Error(`Failed to load absences: ${e.status}`);const t=await e.json();dr.set(t)}catch(e){console.error("Error loading absences:",e),gt.set(e.message)}finally{Vr.set(!1)}},async createAbsence(e,t,r){try{const n=await fetch("/api/absences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({member_id:e,start_date:t,end_date:r})});if(!n.ok){const i=await n.text();throw new Error(`Failed to create absence: ${i}`)}const a=await n.json(),o=await fetch("/api/members");if(o.ok){const s=(await o.json()).find(l=>l.id===e);s&&(a.first_name=s.first_name,a.last_name=s.last_name,a.member_name=s.first_name+(s.last_name?" "+s.last_name:""))}return dr.update(i=>[a,...i]),a}catch(n){throw console.error("Error creating absence:",n),gt.set(n.message),n}},async deleteAbsence(e){try{const t=await fetch(`/api/absences/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.text();throw new Error(`Failed to delete absence: ${r}`)}dr.update(r=>r.filter(n=>n.id!==e))}catch(t){throw console.error("Error deleting absence:",t),gt.set(t.message),t}},async getAbsencesForDateRange(e,t){try{const r=await fetch(`/api/absences/date-range?start=${e}&end=${t}`);if(!r.ok)throw new Error(`Failed to load absences for date range: ${r.status}`);return await r.json()}catch(r){return console.error("Error loading absences for date range:",r),gt.set(r.message),[]}},async getAbsentMembersForDate(e){try{const t=await fetch(`/api/absences/date/${e}`);if(!t.ok)throw new Error(`Failed to load absent members for date: ${t.status}`);return await t.json()}catch(t){return console.error("Error loading absent members for date:",t),gt.set(t.message),[]}}};var bs=R('<div class="relative bg-gradient-to-br from-slate-800/90 via-slate-900/95 to-slate-800/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-700/50 overflow-hidden"><div class="absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-blue-500/5 "></div> <div class="relative grid grid-cols-planning gap-px bg-slate-700/30"><!></div></div>');function Ta(e,t){var r=bs(),n=k(h(r),2),a=h(n);Dt(a,()=>t.children??_e),D(e,r)}var _s=R('<div class="outline outline-1 outline-slate-400/20 bg-gradient-to-b from-slate-800/80 to-slate-900/80 backdrop-blur-sm p-4 font-semibold text-center text-slate-100 border-b border-slate-600/30"><!></div>');function _r(e,t){var r=_s(),n=h(r);Dt(n,()=>t.children??_e),D(e,r)}var ps=R("<div><!></div>");function qt(e,t){let r=b(t,"variant",3,"default");var n=ps(),a=h(n);Dt(a,()=>t.children??_e),G(()=>je(n,1,`outline outline-1 outline-slate-400/20 p-4 font-semibold text-center max-w-14 text-slate-100 flex items-center justify-center ${r()==="third"?"bg-gradient-to-r from-slate-700/60 to-slate-600/60":"bg-gradient-to-r from-slate-800/70 to-slate-700/70"} backdrop-blur-sm border-r border-slate-600/30`)),D(e,n)}var ws=R('<div class="relative p-4 pb-12 backdrop-blur-sm min-h-20 bg-slate-600/30 outline outline-1 outline-slate-400/20"><!></div>');function Vt(e,t){var r=ws(),n=h(r);Dt(n,()=>t.children??_e),D(e,r)}const xs={plus:{viewBox:"0 0 20 20",path:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z",fill:"currentColor"},close:{viewBox:"0 0 20 20",path:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},search:{viewBox:"0 0 24 24",path:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},refresh:{viewBox:"0 0 24 24",path:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},trash:{viewBox:"0 0 20 20",path:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",fill:"currentColor"},warning:{viewBox:"0 0 20 20",path:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},success:{viewBox:"0 0 20 20",path:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},error:{viewBox:"0 0 20 20",path:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},info:{viewBox:"0 0 24 24",path:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},lockOpen:{viewBox:"0 0 24 24",path:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},lockClosed:{viewBox:"0 0 24 24",path:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},calendar:{viewBox:"0 0 20 20",path:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},flag:{viewBox:"0 0 20 20",path:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z",fill:"currentColor"}};function ys(e){return xs[e]}var As=on("<svg><path></path></svg>"),ks=R("<div>?</div>");function Lt(e,t){ae(t,!0);let r=b(t,"name",3,""),n=b(t,"size",3,"w-4 h-4"),a=b(t,"className",3,""),o=b(t,"ariaHidden",3,!0),i=W(()=>ys(r())),s=W(()=>`${n()} ${a()}`.trim());var l=se(),u=te(l);{var f=d=>{var m=As(),g=h(m);G(()=>{je(m,0,Mn(c(s))),ve(m,"viewBox",c(i).viewBox),ve(m,"fill",c(i).fill||"none"),ve(m,"stroke",c(i).stroke||"none"),ve(m,"stroke-width",c(i).strokeWidth||"0"),ve(m,"stroke-linecap",c(i).strokeLinecap||"butt"),ve(m,"stroke-linejoin",c(i).strokeLinejoin||"miter"),ve(m,"aria-hidden",o()),ve(g,"d",c(i).path),ve(g,"fill-rule",c(i).fillRule||"nonzero"),ve(g,"clip-rule",c(i).clipRule||"nonzero")}),D(d,m)},v=d=>{var m=ks();G(()=>{je(m,1,Mn(c(s))),ve(m,"title",`Unknown icon: ${r()??""}`)}),D(d,m)};ee(u,d=>{c(i)?d(f):d(v,!1)})}D(e,l),oe()}var Es=R('<div class="flex relative transition-all duration-300 delay-200 group"><span class="flex relative z-10 flex-col justify-center items-center px-3 py-3 text-xs font-semibold text-white bg-gradient-to-r from-amber-500 to-orange-600 rounded-full shadow-lg transition-all duration-300 cursor-default shadow-amber-500/25"><!> </span></div>');function Ms(e,t){let r=b(t,"text",3,"Aucun membre");var n=Es(),a=h(n),o=h(a);Lt(o,{name:"warning",size:"w-4 h-4",className:"mr-2"});var i=k(o);G(()=>U(i,` ${r()??""}`)),D(e,n)}var Ss=R('<div class="flex justify-center mb-4"><!></div>');function Cs(e,t){let r=b(t,"shouldShowWarning",3,!1),n=b(t,"warningText",3,"");var a=se(),o=te(a);{var i=s=>{var l=Ss(),u=h(l);Ms(u,{get text(){return n()}}),D(s,l)};ee(o,s=>{r()&&s(i)})}D(e,a)}const Ts=e=>e.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),Ds=(e,t)=>{const n=e.getBoundingClientRect().width+2,a=window.getComputedStyle(e),o=parseInt(a.getPropertyValue("padding-left"),10),i=parseInt(a.getPropertyValue("padding-right"),10),s=o+i,l=n-s;return Math.round(Math.min(t,l||t))},Ls=(e,t=null,r)=>{const n=e.getBoundingClientRect(),a=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight;let i=n.bottom>0&&n.top<o&&n.right>0&&n.left<a;if(t){const s=t.getBoundingClientRect();return r==="top"||r==="bottom"?i=s.bottom+s.height<o&&s.top<o:i=s.right+s.width<a&&s.left<a,i}return i},Nn=(e,t,r,n)=>{if(!e||!t)return n;const a=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=window.getComputedStyle(e).position;window.getComputedStyle(e);let s=0,l=0,u=0,f=0,v=0,d=e;for(;d&&d!==document.body;){const _=window.getComputedStyle(d),x=_.position,L=d.getBoundingClientRect();x==="fixed"?(u+=L.top+window.scrollY,v+=L.left+window.scrollX):x==="sticky"?(f+=L.top,v+=L.left+window.scrollX):(x==="absolute"||x==="relative")&&(x==="absolute"&&(s-=parseFloat(_.top)||0,l-=parseFloat(_.left)||0),x==="relative"&&(s-=d.offsetTop,l-=d.offsetLeft,r==="bottom"&&(s+=o.height),r==="right"&&(l-=o.width),i==="absolute"&&r==="right"&&(l+=o.width)));const j=_.transform;if(j&&j!=="none"){const P=new DOMMatrix(j);x==="relative"||x==="absolute"?(s-=P.m42,l-=P.m41):(s-=d.offsetTop+P.m42,l-=d.offsetLeft+P.m41)}d=d.parentElement}let m=o.top+s+f-u,g=o.left+l-v;switch(r){case"top":n.top=m,n.left=g+o.width/2;break;case"bottom":n.top=m-a.height,n.left=g+o.width/2;break;case"left":n.left=g,n.top=m+o.height/2;break;case"right":n.left=g+o.width-a.width,n.top=m+o.height/2;break}return n.top+=window.scrollY,n.left+=window.scrollX,n},Os={left:"right",right:"left",top:"bottom",bottom:"top"};var Ps=R("<div><!></div>");function Is(e,t){ae(t,!0);let r=b(t,"targetElement",3,null),n=b(t,"action",3,"hover"),a=b(t,"content",3,""),o=b(t,"align",3,"left"),i=b(t,"position",7,"top"),s=b(t,"maxWidth",3,200),l=b(t,"style",3,null),u=b(t,"theme",3,""),f=b(t,"animation",3,""),v=b(t,"delay",3,200),d=b(t,"arrow",3,!0),m=b(t,"autoPosition",3,!1),g=b(t,"show",7,!1),_=null,x=J(0),L=null,j=J(null),P=J(!1),S={bottom:0,top:0,right:0,left:0};const p=f()?v():0;ar(()=>{_!==null&&(c(w)&&!L&&(L=sn(a().component,{target:_,props:{action:n(),...a().props}})),C(x,Ds(_,s()),!0)),m()&&!Ls(_,r(),i())&&i(Os[i()]),S=Nn(r(),_,i(),S),f()&&C(j,f()),setTimeout(()=>C(P,!0),p)}),ka(()=>{L&&(Aa(L),L=null,C(P,!1),g(!1))});const E=()=>{c(P)&&(S=Nn(r(),_,i(),S))};let w=W(()=>typeof a()=="object");Ut(()=>{_&&g()?setTimeout(()=>C(P,!0),0):C(P,!1)}),Ut(()=>{if(c(P)&&(console.log("t"),l()&&typeof l()=="object"))for(let N in l()){const B=Ts(N),y=l()[N];_.style.setProperty(`--tooltip-${B}`,y)}});var A=se();br("resize",Rr,E);var T=te(A);{var I=N=>{var B=Ps();let y;var O=h(B);{var V=q=>{var Q=se(),$=te(Q);Uo($,a),D(q,Q)};ee(O,q=>{c(w)||q(V)})}ns(B,q=>_=q,()=>_),G(q=>{y=je(B,1,`tooltip animation-${c(j)??""} ${i()??""} ${u()??""}`,"svelte-16lxf1i",y,q),Xo(B,`bottom: auto; right: auto; left: ${S.left??""}px; min-width: ${c(x)??""}px; max-width: ${s()??""}px; text-align: ${o()??""}; top: ${S.top??""}px;`)},[()=>({show:c(P),arrowless:!d()})]),D(N,B)};ee(T,N=>{a()&&N(I)})}D(e,A),oe()}const Ue=(e,t)=>{let r=null,n=e.getAttribute("title"),a=(t==null?void 0:t.action)||e.getAttribute("action")||"hover";const o=(t==null?void 0:t.hideOnClickOutside)||e.getAttribute("hideOnClickOutside")||!1,i=({target:m})=>{o&&m&&!m.classList.contains("tooltip")&&f()};let s={...t,targetElement:e};s.hideOnClickOutside&&delete s.hideOnClickOutside,n&&(e.removeAttribute("title"),s.content=n);const l=()=>{r?a==="click"&&o||f():u()},u=()=>{r||(r=sn(Is,{target:e,props:s}))},f=()=>{r&&(Aa(r),r=null)},v=()=>{e!==null&&(d(),a==="click"&&(e.addEventListener("click",l),o&&document.addEventListener("click",i,{passive:!0,capture:!0})),a==="hover"&&(e.addEventListener("mouseenter",u),e.addEventListener("mouseleave",f)))},d=()=>{o&&document.removeEventListener("click",i),e!==null&&(e.removeEventListener("click",l),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseleave",f))};return v(),s.show&&setTimeout(u,0),{destroy(){d(),n&&e.setAttribute("title",n)},update(m){Object.assign(s,m),r&&r.$set(s)}}};var js=on('<svg class="flex-shrink-0 w-4 h-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path></path></svg>'),Rs=R('<button><span class="sr-only"> </span> <!></button>'),Ns=R("<div><span><!> </span> <!></div>");function Cr(e,t){let r=b(t,"text",3,""),n=b(t,"tooltipText",3,""),a=b(t,"showButton",3,!1),o=b(t,"buttonGradient",3,"from-red-400/100 to-red-700"),i=b(t,"buttonHoverGradient",3,"hover:from-red-400/90 hover:to-red-500/90"),s=b(t,"buttonRing",3,"focus:ring-red-500/50"),l=b(t,"buttonIcon",3,""),u=b(t,"buttonTooltip",3,""),f=b(t,"onClick",3,null),v=b(t,"tagGradient",3,"from-indigo-500 to-purple-600"),d=b(t,"tagTextColor",3,"text-white"),m=b(t,"tagShadowColor",3,"shadow-indigo-500/25"),g=b(t,"tagHoverShadowColor",3,"group-hover:shadow-indigo-500/40"),_=b(t,"customClasses",3,"");var x=Ns(),L=h(x),j=h(L);{var P=w=>{var A=se(),T=te(A);Dt(T,()=>t.icon),D(w,A)};ee(j,w=>{t.icon&&w(P)})}var S=k(j);_t(L,(w,A)=>Ue==null?void 0:Ue(w,A),()=>n()?{content:n(),position:"top",theme:"high-z-index"}:void 0);var p=k(L,2);{var E=w=>{var A=Rs();A.__click=function(...y){var O;(O=f())==null||O.apply(this,y)};var T=h(A),I=h(T),N=k(T,2);{var B=y=>{var O=js(),V=h(O);G(()=>ve(V,"d",l())),D(y,O)};ee(N,y=>{l()&&y(B)})}_t(A,(y,O)=>Ue==null?void 0:Ue(y,O),()=>u()?{content:u(),position:"top",theme:"high-z-index"}:void 0),G(()=>{je(A,1,`absolute top-0 h-full w-10 overflow-hidden bg-gradient-to-tr ${o()??""} rounded-r-full flex items-center justify-end pr-1.5 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 delay-150 focus:outline-none focus:ring-2 ${s()??""} ${i()??""} right-0 group-hover:right-[-1.5rem]`),U(I,u())}),D(w,A)};ee(p,w=>{a()&&f()&&w(E)})}G(()=>{je(x,1,`flex relative transition-all duration-300 delay-200 group ${f()?"hover:-translate-x-3":""} ${_()??""}`),je(L,1,`inline-flex relative z-10 px-3 py-1.5 text-sm font-semibold ${d()??""} bg-gradient-to-r ${v()??""} rounded-full shadow-lg transition-all duration-300 cursor-pointer ${m()??""} ${f()?`group-hover:scale-105 group-hover:shadow-2xl ${g()}`:""} ${_()??""}`),U(S,` ${r()||"Membre inconnu"}`)}),D(e,x)}lt(["click"]);function zs(e,t){let r=b(t,"text",3,""),n=b(t,"tooltip",3,"");Cr(e,{get text(){return r()},get tooltipText(){return n()},showButton:!1,tagGradient:"from-slate-600/80 to-slate-700/80",tagTextColor:"text-slate-300",tagShadowColor:"shadow-slate-500/25",tagHoverShadowColor:"group-hover:shadow-slate-500/40",customClasses:"line-through opacity-90 cursor-help"})}function Fs(e,t,r){t()&&t()(),C(r,!1)}var Bs=on('<svg class="w-3 h-3 mr-1.5 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>'),Hs=(e,t)=>e.target===e.currentTarget&&t(),qs=R(`<div class="fixed bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999]" style="top: 0; left: 0; right: 0; bottom: 0; margin: 0;"><div class="bg-gradient-to-br from-slate-800/95 via-slate-900/98 to-slate-800/95 backdrop-blur-xl rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-slate-700/50"><div class="flex items-center space-x-3 mb-4"><div class="flex-shrink-0 w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg></div> <h3 class="text-lg font-semibold text-white">Supprimer l'affectation spécifique</h3></div> <div class="text-slate-300 mb-6"><p>Êtes-vous sûr de vouloir supprimer l'affectation de <span class="font-semibold text-white"> </span> pour le <span class="font-semibold text-white"> </span> en <span class="font-semibold text-white"> </span> ?</p></div> <div class="flex justify-end space-x-3"><button class="px-4 py-2 text-slate-200 hover:text-white bg-gradient-to-r from-slate-700/70 to-slate-600/70 backdrop-blur-sm rounded-lg hover:from-slate-600/80 hover:to-slate-500/80 transition-all duration-300 border border-slate-500/40">Annuler</button> <button class="px-4 py-2 text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 rounded-lg transition-all duration-300 shadow-lg shadow-red-500/25 hover:shadow-red-500/40 focus:outline-none focus:ring-2 focus:ring-red-500/50 border border-red-500/30">Supprimer</button></div></div></div>`),Vs=R("<!> <!>",1);function Ws(e,t){ae(t,!0);let r=b(t,"text",3,""),n=b(t,"tooltip",3,""),a=b(t,"showButton",3,!1),o=b(t,"buttonGradient",3,"from-red-500 to-red-600"),i=b(t,"buttonHoverGradient",3,"hover:from-red-400 hover:to-red-500"),s=b(t,"buttonRing",3,"focus:ring-red-500/50"),l=b(t,"buttonIcon",3,"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"),u=b(t,"buttonTooltip",3,"Supprimer cette affectation spécifique"),f=b(t,"onClick",3,null),v=b(t,"memberName",3,""),d=b(t,"slotType",3,""),m=b(t,"date",3,""),g=J(!1);function _(){setTimeout(()=>{C(g,!0)},200)}function x(){C(g,!1)}function L(A){let T=document.body;function I(){T.appendChild(A)}function N(){A.parentNode&&A.parentNode.removeChild(A)}return I(),{destroy:N}}let j=W(()=>n()||"Affectation spécifique - Ce membre n'est pas habituellement assigné ce jour"),P=W(()=>`${c(j)} - ${r()||"Membre inconnu"}`);var S=Vs(),p=te(S);Cr(p,{get text(){return r()},get tooltipText(){return c(P)},get showButton(){return a()},get buttonGradient(){return o()},get buttonHoverGradient(){return i()},get buttonRing(){return s()},get buttonIcon(){return l()},get buttonTooltip(){return u()},onClick:_,tagGradient:"from-emerald-600 to-emerald-700",tagTextColor:"text-white",tagShadowColor:"shadow-emerald-600/25",tagHoverShadowColor:"group-hover:shadow-emerald-600/40",customClasses:"items-center",icon:T=>{var I=Bs();D(T,I)},$$slots:{icon:!0}});var E=k(p,2);{var w=A=>{var T=qs();T.__click=[Hs,x];var I=h(T),N=k(h(I),2),B=h(N),y=k(h(B)),O=h(y),V=k(y,2),q=h(V),Q=k(V,2),$=h(Q),we=k(N,2),ie=h(we);ie.__click=x;var X=k(ie,2);X.__click=[Fs,f,g],_t(T,ne=>L==null?void 0:L(ne)),G(()=>{U(O,v()||r()||"Membre inconnu"),U(q,m()||"Date non spécifiée"),U($,d()==="ouverture"?"ouverture":"fermeture")}),D(A,T)};ee(E,A=>{c(g)&&A(w)})}D(e,S),oe()}lt(["click"]);function Gs(e,t){ae(t,!0);let r=b(t,"text",3,""),n=b(t,"tooltip",3,""),a=b(t,"showButton",3,!1),o=b(t,"buttonGradient",3,"from-red-400/100 to-red-700"),i=b(t,"buttonHoverGradient",3,"hover:from-red-400/90 hover:to-red-500/90"),s=b(t,"buttonRing",3,"focus:ring-red-500/50"),l=b(t,"buttonIcon",3,""),u=b(t,"buttonTooltip",3,""),f=b(t,"onClick",3,null);function v(){setTimeout(()=>{f()&&f()()},200)}Cr(e,{get text(){return r()},get tooltipText(){return n()},get showButton(){return a()},get buttonGradient(){return o()},get buttonHoverGradient(){return i()},get buttonRing(){return s()},get buttonIcon(){return l()},get buttonTooltip(){return u()},onClick:v}),oe()}var Us=(e,t,r,n)=>t()(r(),n()),Ys=R('<button type="button" class="flex justify-center items-center w-6 h-6 bg-gradient-to-br rounded-full border shadow-lg backdrop-blur-sm transition-all duration-300 from-slate-600/80 to-slate-700/80 hover:from-slate-500/90 hover:to-slate-600/90 focus:outline-none focus:ring-2 focus:ring-slate-500/50 shadow-slate-500/25 hover:shadow-slate-500/40 hover:scale-110 border-slate-400/30"><span class="sr-only">Ajouter membre</span> <!></button>');function Js(e,t){ae(t,!0);let r=b(t,"onAddMember",3,null),n=b(t,"dayIndex",3,0),a=b(t,"slotType",3,"");var o=se(),i=te(o);{var s=l=>{var u=Ys();u.__click=[Us,r,n,a];var f=k(h(u),2);Lt(f,{name:"plus",size:"w-3 h-3",className:"text-white"}),D(l,u)};ee(i,l=>{r()&&l(s)})}D(e,o),oe()}lt(["click"]);var Ks=R('<div class="flex flex-col flex-wrap gap-4 justify-start items-center h-full"><!> <!></div>');function Xs(e,t){ae(t,!0);let r=b(t,"slotAssignments",19,()=>[]),n=b(t,"weeklyAbsences",19,()=>[]),a=b(t,"dayIndex",3,0),o=b(t,"slotType",3,""),i=b(t,"isMemberAbsent",3,null),s=b(t,"getAbsencePeriod",3,null),l=b(t,"onMarkAbsent",3,null),u=b(t,"onDeleteSpecificAssignment",3,null),f=b(t,"onAddMember",3,null);var v=Ks(),d=h(v);ke(d,17,r,Be,(g,_)=>{var x=se();const L=W(()=>n().length>0&&i()(c(_).member_id,a()));var j=te(x);{var P=p=>{const E=W(()=>s()(c(_).member_id));zs(p,{get text(){return c(_).first_name},get tooltip(){return`Absent du ${c(E)??""}`}})},S=(p,E)=>{{var w=T=>{const I=W(()=>u()!==null);Ws(T,{get text(){return c(_).first_name},get showButton(){return c(I)},get memberName(){return c(_).first_name},get slotType(){return o()},get date(){return c(_).date},onClick:()=>u()(c(_).id,c(_).member_id,c(_).first_name,a(),o())})},A=T=>{const I=W(()=>l()!==null);Gs(T,{get text(){return c(_).first_name},get showButton(){return c(I)},buttonGradient:"from-orange-400/100 to-orange-700",buttonHoverGradient:"hover:from-orange-400/90 hover:to-orange-500/90",buttonRing:"focus:ring-orange-500/50",buttonIcon:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z",buttonTooltip:"Marquer comme absent",onClick:()=>l()(c(_).member_id,c(_).first_name,a())})};ee(p,T=>{c(_).is_specific_date?T(w):T(A,!1)},E)}};ee(j,p=>{c(L)?p(P):p(S,!1)})}D(g,x)});var m=k(d,2);Js(m,{get onAddMember(){return f()},get dayIndex(){return a()},get slotType(){return o()}}),D(e,v),oe()}var Zs=R('<div class="flex flex-col h-full"><!> <div class="flex-1 flex items-center justify-center"><!></div></div>');function zn(e,t){ae(t,!0);let r=b(t,"onMarkAbsent",3,null),n=b(t,"onAddMember",3,null),a=b(t,"onDeleteSpecificAssignment",3,null),o=W(()=>t.assignments.filter(d=>d.weekday===t.dayIndex&&d.slot_type===t.slotType).sort((d,m)=>{const g=x=>t.weeklyAbsences.length>0&&t.isMemberAbsent(x.member_id,t.dayIndex)?2:x.is_specific_date?1:0,_=g(d)-g(m);return _!==0?_:(d.first_name||"").localeCompare(m.first_name||"")})),i=W(()=>t.slotType==="ouverture"?c(o).length===0:c(o).length<=1),s=W(()=>t.slotType==="ouverture"||c(o).length===0?"Aucun membre":"Membre seul");var l=Zs(),u=h(l);Cs(u,{get shouldShowWarning(){return c(i)},get warningText(){return c(s)}});var f=k(u,2),v=h(f);Xs(v,{get slotAssignments(){return c(o)},get weeklyAbsences(){return t.weeklyAbsences},get dayIndex(){return t.dayIndex},get slotType(){return t.slotType},get isMemberAbsent(){return t.isMemberAbsent},get getAbsencePeriod(){return t.getAbsencePeriod},get onMarkAbsent(){return r()},get onDeleteSpecificAssignment(){return a()},get onAddMember(){return n()}}),D(e,l),oe()}var Qs=R('<div class="flex items-center -rotate-90"><!> </div>');function pr(e,t){const r={ouverture:{name:"Ouverture",iconName:"lockOpen"},fermeture:{name:"Fermeture",iconName:"lockClosed"}};let n=W(()=>r[t.slotType]);var a=Qs(),o=h(a);Lt(o,{get name(){return c(n).iconName},size:"w-4 h-4",className:"mr-2"});var i=k(o);G(()=>U(i,` ${c(n).name??""}`)),D(e,a)}var $s=R('<div class="text-xs text-gray-400 mt-1"> </div>'),ei=R('<div class="text-sm font-medium"> </div> <!>',1);function Da(e,t){ae(t,!0);let r=b(t,"date",3,null);var n=ei(),a=te(n),o=h(a),i=k(a,2);{var s=l=>{var u=$s(),f=h(u);G((v,d)=>U(f,`${v??""}/${d??""}`),[()=>r().getDate(),()=>r().getMonth()+1]),D(l,u)};ee(i,l=>{r()&&l(s)})}G(()=>U(o,t.day)),D(e,n),oe()}var ti=R('<div class="mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6"><div class="mt-2 flex items-center text-sm text-slate-300 bg-gradient-to-r from-slate-700/30 to-slate-600/30 backdrop-blur-sm rounded-lg px-3 py-2 border border-slate-600/30"><svg class="mr-1.5 h-5 w-5 flex-shrink-0 text-slate-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd"></path></svg> <!></div></div>'),ri=R('<div class="md:flex md:items-center md:justify-between"><div class="min-w-0 flex-1"><h2 class="text-2xl font-bold leading-7 text-transparent bg-gradient-to-r from-white via-slate-100 to-white bg-clip-text sm:truncate sm:text-3xl sm:tracking-tight drop-shadow-lg"> </h2> <!></div></div>');function fn(e,t){ae(t,!0);let r=b(t,"subtitle",3,null),n=b(t,"icon",3,null),a=b(t,"startDate",3,null),o=b(t,"endDate",3,null);const i="M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z";var s=ri(),l=h(s),u=h(l),f=h(u),v=k(u,2);{var d=m=>{var g=ti(),_=h(g),x=h(_),L=h(x),j=k(x,2);{var P=p=>{var E=An();G((w,A)=>U(E,`${w??""} - ${A??""}`),[()=>a().toLocaleDateString("fr-FR"),()=>o().toLocaleDateString("fr-FR")]),D(p,E)},S=p=>{var E=An();G(()=>U(E,r())),D(p,E)};ee(j,p=>{a()&&o()?p(P):p(S,!1)})}G(()=>ve(L,"d",n()||i)),D(m,g)};ee(v,m=>{(r()||a()&&o())&&m(d)})}G(()=>U(f,t.title)),D(e,s),oe()}var ni=R('<div class="flex items-center -rotate-90"><svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </div>');function ai(e,t){var r=ni(),n=h(r),a=h(n),o=k(n);G(()=>{ve(a,"d",t.iconPath),U(o,` ${t.title??""}`)}),D(e,r)}var oi=R('<span class="inline-block px-3 py-1.5 text-xs font-semibold bg-gradient-to-r rounded-full border backdrop-blur-sm transition-all duration-300 cursor-help text-slate-200 from-slate-500/80 to-slate-600/80 border-slate-400/30 hover:bg-gradient-to-r hover:from-slate-400/90 hover:to-slate-500/90 hover:scale-105"> </span>'),si=R('<div class="flex flex-col flex-wrap gap-2 justify-center items-center h-full"></div>'),ii=R('<div class="flex absolute inset-0 justify-center items-center bg-gradient-to-r backdrop-blur-sm text-slate-300 from-emerald-500/10 to-teal-500/10"><!> <span class="text-xs">Aucune absence</span></div>');function li(e,t){ae(t,!0);var r=se(),n=te(r);{var a=i=>{var s=si();ke(s,21,()=>t.absentMembers,Be,(l,u)=>{var f=oi(),v=h(f);_t(f,(d,m)=>Ue==null?void 0:Ue(d,m),()=>({content:`Absent du ${t.getAbsencePeriod(c(u).member_id)}`,position:"top",theme:"high-z-index"})),G(()=>U(v,c(u).first_name||"Membre inconnu")),D(l,f)}),D(i,s)},o=i=>{var s=ii(),l=h(s);Lt(l,{name:"success",size:"w-5 h-5",className:"mr-2 text-emerald-400"}),D(i,s)};ee(n,i=>{t.absentMembers.length>0?i(a):i(o,!1)})}D(e,r),oe()}var ui=R('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-10 w-10 border-2 border-transparent bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-padding"></div> <div class="animate-spin rounded-full h-10 w-10 border-2 border-indigo-400/30 border-t-indigo-400 -ml-10"></div> <span class="ml-6 text-slate-200 font-medium"> </span></div>');function ci(e,t){let r=b(t,"text",3,"Chargement...");var n=ui(),a=k(h(n),4),o=h(a);G(()=>U(o,r())),D(e,n)}var di=R('<div class="rounded-2xl bg-gradient-to-r from-red-900/80 to-red-800/80 backdrop-blur-xl p-6 border border-red-700/50 shadow-2xl shadow-red-900/25"><div class="flex"><div class="flex-shrink-0"><div class="w-10 h-10 bg-gradient-to-r from-red-500 to-red-600 rounded-full flex items-center justify-center"><svg class="h-5 w-5 text-white" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd"></path></svg></div></div> <div class="ml-4"><h3 class="text-sm font-semibold text-red-100"> </h3> <div class="mt-2 text-sm text-red-200"><p> </p></div></div></div></div>');function fi(e,t){let r=b(t,"title",3,"Une erreur s'est produite");var n=di(),a=h(n),o=k(h(a),2),i=h(o),s=h(i),l=k(i,2),u=h(l),f=h(u);G(()=>{U(s,r()),U(f,t.error)}),D(e,n)}function vn(e,t){let r=b(t,"isLoading",3,!1),n=b(t,"error",3,null),a=b(t,"loadingText",3,"Chargement..."),o=b(t,"errorTitle",3,"Une erreur s'est produite");var i=se(),s=te(i);{var l=f=>{ci(f,{get text(){return a()}})},u=(f,v)=>{{var d=g=>{fi(g,{get error(){return n()},get title(){return o()}})},m=g=>{var _=se(),x=te(_);Dt(x,()=>t.children??_e),D(g,_)};ee(f,g=>{n()?g(d):g(m,!1)},v)}};ee(s,f=>{r()?f(l):f(u,!1)})}D(e,i)}function vi(e,t){t("confirm")}function mi(e,t){e.target===e.currentTarget&&t()}var gi=R(`<div class="fixed bg-black/60 backdrop-blur-sm flex items-center justify-center z-50" style="top: 0; left: 0; right: 0; bottom: 0; margin: 0;"><div class="bg-gradient-to-br from-slate-800/95 via-slate-900/98 to-slate-800/95 backdrop-blur-xl rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-slate-700/50 mb-4"><div class="flex items-center space-x-3 mb-4"><div class="w-10 h-10 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center"><svg class="h-5 w-5 text-white" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path></svg></div> <h3 class="text-lg font-medium text-transparent bg-gradient-to-r from-white to-slate-200 bg-clip-text">Marquer une absence</h3></div> <div class="mb-6"><p class="text-slate-200 text-sm">Êtes-vous sûr de vouloir marquer <span class="font-semibold text-white"> </span> comme absent le <span class="font-semibold text-white"> </span> ?</p> <p class="text-slate-400 text-xs mt-2">Une nouvelle absence sera créée pour cette date uniquement.</p></div> <div class="flex justify-end space-x-3"><button class="px-4 py-2 text-slate-200 hover:text-white bg-gradient-to-r from-slate-700/70 to-slate-600/70 backdrop-blur-sm rounded-lg hover:from-slate-600/80 hover:to-slate-500/80 transition-all duration-300 border border-slate-500/40">Annuler</button> <button class="px-4 py-2 text-white bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-500 hover:to-orange-600 rounded-lg transition-all duration-300 shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 focus:outline-none focus:ring-2 focus:ring-orange-500/50 border border-orange-500/30">Confirmer l'absence</button></div></div></div>`);function hi(e,t){ae(t,!0);let r=b(t,"show",3,!1),n=b(t,"memberName",3,""),a=b(t,"date",3,""),o=b(t,"dayIndex",3,0);const i=ln(),s=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];let l=W(()=>s[o()]||"Jour inconnu");function u(){i("cancel")}var f=se(),v=te(f);{var d=m=>{var g=gi();g.__click=[mi,u];var _=h(g),x=k(h(_),2),L=h(x),j=k(h(L)),P=h(j),S=k(j,2),p=h(S),E=k(x,2),w=h(E);w.__click=u;var A=k(w,2);A.__click=[vi,i],G(()=>{U(P,n()),U(p,`${c(l)??""} ${a()??""}`)}),D(m,g)};ee(v,m=>{r()&&m(d)})}D(e,f),oe()}lt(["click"]);function bi(e,t,r){t("select",{memberIds:Array.from(c(r))}),c(r).clear(),C(r,new Set,!0)}function _i(e,t){e.target===e.currentTarget&&t()}var pi=R('<p class="text-slate-400 text-center"> </p>'),wi=(e,t,r)=>t(c(r)),xi=R("<button> </button>"),yi=R('<div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded shadow-lg whitespace-nowrap z-50"> <div class="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"></div></div>'),Ai=R('<div class="relative inline-flex items-center px-3 py-1.5 text-sm font-medium text-slate-300 rounded-full cursor-not-allowed bg-gradient-to-r from-slate-600/80 to-slate-700/80 opacity-60 backdrop-blur-sm border border-slate-500/30"> <!></div>'),ki=R('<div class="flex flex-wrap gap-2 p-1 overflow-visible"></div>'),Ei=R('<div class="fixed bg-black/60 backdrop-blur-sm flex items-center justify-center z-50" style="top: 0; left: 0; right: 0; bottom: 0; margin: 0;"><div class="bg-gradient-to-br from-slate-800/95 via-slate-900/98 to-slate-800/95 backdrop-blur-xl rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-slate-700/50"><h3 class="text-lg font-medium text-transparent bg-gradient-to-r from-white to-slate-200 bg-clip-text mb-4">Ajouter un Membre</h3> <div class="relative mb-4"><input type="text" placeholder="Filtrer les membres..." class="w-full px-3 py-2 bg-gradient-to-r from-slate-700/80 to-slate-600/80 backdrop-blur-sm border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all duration-300"/> <div class="absolute right-3 top-2.5 text-slate-400"><!></div></div> <div class="space-y-3 max-h-60 overflow-y-auto overflow-x-visible p-1 -m-1"><!></div> <div class="flex justify-end space-x-3 mt-6"><button class="px-4 py-2 text-slate-200 hover:text-white bg-gradient-to-r from-slate-700/70 to-slate-600/70 backdrop-blur-sm rounded-lg hover:from-slate-600/80 hover:to-slate-500/80 transition-all duration-300 border border-slate-500/40">Annuler</button> <button class="px-4 py-2 text-white bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 rounded-lg transition-all duration-300 shadow-lg shadow-emerald-500/25 hover:shadow-emerald-500/40 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-emerald-500/50 border border-emerald-500/30"> </button></div></div></div>');function La(e,t){ae(t,!0);let r=b(t,"show",3,!1),n=b(t,"members",19,()=>[]),a=b(t,"assignments",19,()=>[]),o=b(t,"selectedDay",3,null),i=b(t,"selectedSlot",3,null),s=b(t,"absentMembers",19,()=>[]),l=b(t,"specificAssignments",19,()=>[]);const u=ln();let f=J(""),v=J(rt(new Set)),d=J(null),m=W(()=>a().filter(y=>y.weekday===o()&&y.slot_type===i())),g=W(()=>l().filter(y=>y.weekday===o()&&y.slot_type===i())),_=W(()=>new Set([...c(m).map(y=>y.member_id),...c(g).map(y=>y.member_id)])),x=W(()=>new Set(s().map(y=>y.member_id))),L=W(()=>n().filter(y=>!c(_).has(y.id)&&!c(x).has(y.id))),j=W(()=>n().filter(y=>c(_).has(y.id))),P=W(()=>n().filter(y=>c(x).has(y.id))),S=W(()=>c(L).filter(y=>{const O=c(f).toLowerCase(),V=(y.first_name||"").toLowerCase(),q=(y.name||"").toLowerCase();return V.includes(O)||q.includes(O)})),p=W(()=>c(j).filter(y=>{const O=c(f).toLowerCase(),V=(y.first_name||"").toLowerCase(),q=(y.name||"").toLowerCase();return V.includes(O)||q.includes(O)})),E=W(()=>c(P).filter(y=>{const O=c(f).toLowerCase(),V=(y.first_name||"").toLowerCase(),q=(y.name||"").toLowerCase();return V.includes(O)||q.includes(O)})),w=W(()=>(()=>{const y=new Map;return c(S).forEach(O=>{y.set(O.id,{...O,status:"available"})}),c(p).forEach(O=>{y.set(O.id,{...O,status:"assigned"})}),c(E).forEach(O=>{y.set(O.id,{...O,status:"absent"})}),Array.from(y.values()).sort((O,V)=>{const q=(O.first_name||"").toLowerCase(),Q=(V.first_name||"").toLowerCase();return q.localeCompare(Q)})})());function A(y){y.status==="absent"||y.status==="assigned"||(c(v).has(y.id)?c(v).delete(y.id):c(v).add(y.id),C(v,new Set(c(v)),!0))}function T(){u("close")}var I=se(),N=te(I);{var B=y=>{var O=Ei();O.__click=[_i,T];var V=h(O),q=k(h(V),2),Q=h(q),$=k(Q,2),we=h($);Lt(we,{name:"search",size:"w-5 h-5"});var ie=k(q,2),X=h(ie);{var ne=ue=>{var We=pi(),Re=h(We);G(()=>U(Re,c(f)?"Aucun membre trouvé":"Aucun membre disponible")),D(ue,We)},le=ue=>{var We=ki();ke(We,21,()=>c(w),Re=>Re.id,(Re,ce)=>{var Ne=se(),wt=te(Ne);{var ct=Se=>{var he=xi();he.__click=[wi,A,ce];var Qe=h(he);G(dt=>{je(he,1,`inline-flex items-center px-3 py-1.5 text-sm font-medium text-white rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transform hover:scale-105 shadow-lg ${dt??""}`),U(Qe,c(ce).first_name)},[()=>c(v).has(c(ce).id)?"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-500/25 hover:from-emerald-400 hover:to-teal-500 hover:shadow-emerald-500/40":"bg-gradient-to-r from-indigo-500 to-purple-600 shadow-indigo-500/25 hover:from-indigo-400 hover:to-purple-500 hover:shadow-indigo-500/40"]),D(Se,he)},Ot=Se=>{var he=Ai(),Qe=h(he),dt=k(Qe);{var Pt=M=>{var z=yi(),H=h(z);G(()=>U(H,`${c(ce).status==="assigned"?"Ce membre est déjà assigné à ce créneau":"Ce membre est absent"} `)),D(M,z)};ee(dt,M=>{var z;((z=c(d))==null?void 0:z.id)===c(ce).id&&M(Pt)})}G(()=>{ve(he,"title",c(ce).status==="assigned"?"Ce membre est déjà assigné à ce créneau":"Ce membre est absent"),U(Qe,`${c(ce).first_name??""} `)}),br("mouseenter",he,()=>C(d,{id:c(ce).id,type:c(ce).status},!0)),br("mouseleave",he,()=>C(d,null)),D(Se,he)};ee(wt,Se=>{c(ce).status==="available"?Se(ct):Se(Ot,!1)})}D(Re,Ne)}),D(ue,We)};ee(X,ue=>{c(w).length===0?ue(ne):ue(le,!1)})}var Oe=k(ie,2),xe=h(Oe);xe.__click=T;var ut=k(xe,2);ut.__click=[bi,u,v];var Pe=h(ut);G(()=>{ut.disabled=c(v).size===0,U(Pe,`Valider (${c(v).size??""})`)}),Hr(Q,()=>c(f),ue=>C(f,ue)),D(y,O)};ee(N,y=>{r()&&y(B)})}D(e,I),oe()}lt(["click"]);function Mi(e,t){t()&&t()()}var Si=R(`<div class="flex fixed z-50 justify-center items-center bg-black bg-opacity-50" style="top: 0; left: 0; right: 0; bottom: 0; margin: 0;" role="dialog" aria-modal="true" tabindex="-1"><div class="p-6 mx-4 w-full max-w-md bg-gradient-to-br rounded-lg border shadow-2xl from-slate-800 to-slate-900 border-slate-700" role="document"><div class="flex justify-center items-center mb-4"><div class="flex justify-center items-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full"><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div></div> <div class="mb-6 text-center"><h2 class="mb-2 text-lg font-semibold text-white">Confirmer l'affectation</h2> <p class="text-sm text-slate-300">Voulez-vous affecter <span class="font-medium text-white"> </span> au <span class="font-medium text-white"> </span> en <span class="font-medium text-white"> </span> ?</p> <p class="mt-2 text-xs text-slate-400">Cette affectation ne concerne que cette date précise.</p></div> <div class="flex justify-end space-x-3"><button class="px-4 py-2 text-sm font-medium transition-colors text-slate-400 hover:text-white">Annuler</button> <button class="px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-md transition-all duration-300 hover:from-emerald-600 hover:to-emerald-700">Confirmer</button></div></div></div>`);function Ci(e,t){ae(t,!0);let r=b(t,"isOpen",3,!1),n=b(t,"member",3,null),a=b(t,"dayIndex",3,0),o=b(t,"date",3,null),i=b(t,"slotType",3,""),s=b(t,"onConfirm",3,null),l=b(t,"onCancel",3,null);const u=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];function f(){l()&&l()()}function v(_){_.key==="Escape"&&f()}ls(()=>{r()?document.addEventListener("keydown",v):document.removeEventListener("keydown",v)});var d=se(),m=te(d);{var g=_=>{var x=Si();x.__click=f,x.__keydown=v;var L=h(x),j=k(h(L),2),P=k(h(j),2),S=k(h(P)),p=h(S),E=k(S,2),w=h(E),A=k(E,2),T=h(A),I=k(j,2),N=h(I);N.__click=f;var B=k(N,2);B.__click=[Mi,s],G(()=>{U(p,`${n().first_name??""} ${(n().last_name||"")??""}`),U(w,`${u[a()]??""} ${o()??""}`),U(T,i())}),D(_,x)};ee(m,_=>{r()&&n()&&n().first_name&&_(g)})}D(e,d),oe()}lt(["click","keydown"]);const Oa=Le([]);let Ti=0;function me(e,t="success",r=5e3){const n=Ti++,a={id:n,message:e,type:t,duration:r};return Oa.update(o=>[...o,a]),r>0&&setTimeout(()=>{Di(n)},r),n}function Di(e){Oa.update(t=>t.filter(r=>r.id!==e))}var Li=R("<!> <!> <!> <!> <!> <!> <!> <!>",1),Oi=R('<div class="py-10"><div class="px-4 mx-auto max-w-7xl sm:px-6 lg:px-8"><!> <div class="mt-8"><!></div></div></div> <!> <!> <!>',1);function Pi(e,t){ae(t,!0);const[r,n]=Sr(),a=()=>be(u,"$weeklyAbsences",r),o=()=>be(Te,"$assignments",r),i=()=>be(f,"$specificAssignments",r),s=()=>be(et,"$isLoading",r),l=()=>be(tt,"$error",r);let u=Le([]),f=Le([]);ar(async()=>{await cr.loadData(),await m(),await $(),await we()});function v(M){return new Date(M).toLocaleDateString("fr-FR")}function d(M){const z=a().find(fe=>fe.member_id===M);if(!z)return"";const H=v(z.start_date),F=v(z.end_date);return H===F?H:`${H} au ${F}`}async function m(){const M=_(),z=M[0].toISOString().split("T")[0],H=M[6].toISOString().split("T")[0];try{const F=await Ht.getAbsencesForDateRange(z,H);u.set(F)}catch(F){console.error("Error loading weekly absences:",F),u.set([])}}function g(){const M=new Date,z=new Date(M.getFullYear(),0,1),H=Math.floor((M-z)/(24*60*60*1e3));return Math.ceil((H+z.getDay()+1)/7)}function _(){const M=new Date,z=M.getDay(),H=new Date(M);H.setDate(M.getDate()-z+1);const F=[];for(let fe=0;fe<7;fe++){const Ie=new Date(H);Ie.setDate(H.getDate()+fe),F.push(Ie)}return F}const x=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];function L(M,z){const H=_()[z].toISOString().split("T")[0];return a().some(F=>F.member_id===M&&F.start_date<=H&&F.end_date>=H)}function j(M){const z=_()[M].toISOString().split("T")[0];return a().filter(H=>H.start_date<=z&&H.end_date>=z)}function P(M,z){return a().length===0?[]:c(xe).filter(F=>F.weekday===M&&F.slot_type===z).filter(F=>L(F.member_id,M))}function S(M){if(a().length===0)return[];const z=new Set(c(xe).filter(F=>F.weekday===M).map(F=>F.member_id));return j(M).filter(F=>!z.has(F.member_id))}let p=J(!1),E=null,w=J(""),A=J(0),T=J(!1),I=J(!1),N=J(null),B=J(0),y=J(""),O=J(rt([]));function V(M,z,H){E=M,C(w,z,!0),C(A,H,!0),C(p,!0)}function q(){C(p,!1),E=null,C(w,""),C(A,0)}async function Q(){if(E)try{const M=_()[c(A)].toISOString().split("T")[0];await Ht.createAbsence(E,M,M),await m(),me(`${c(w)} marqué(e) comme absent(e)`,"success"),q()}catch(M){console.error("Error creating absence:",M),me("Erreur lors de la création de l'absence","error")}}async function $(){const M=_(),z=M[0].toISOString().split("T")[0],H=M[6].toISOString().split("T")[0];try{const F=await fetch(`/api/specific-assignments?start_date=${z}&end_date=${H}`);if(F.ok){const fe=await F.json();f.set(fe)}}catch(F){console.error("Error loading specific assignments:",F),f.set([])}}async function we(){try{const M=await fetch("/api/members");M.ok&&C(O,await M.json(),!0)}catch(M){console.error("Error loading members:",M)}}function ie(M,z){C(B,M,!0),C(y,z,!0),C(T,!0)}function X(M){const{memberIds:z}=M.detail;if(z.length>0){const H=c(O).find(F=>F.id===z[0]);H?(C(N,H,!0),C(T,!1),C(I,!0)):(console.error("Selected member not found in allMembers array"),me("Erreur: membre non trouvé","error"))}}async function ne(){const M=c(N),z=c(B),H=c(y);if(!M){console.error("selectedMemberForAssignment is null"),me("Erreur: aucun membre sélectionné","error");return}if(!M.first_name){console.error("selectedMemberForAssignment missing first_name",M),me("Erreur: données du membre incomplètes","error");return}try{const F=_()[z].toISOString().split("T")[0];if((await fetch("/api/specific-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({member_id:M.id,date:F,slot_type:H})})).ok)await $(),me(`${M.first_name} affecté(e) pour cette date`,"success");else throw new Error("Failed to create assignment")}catch(F){console.error("Error creating assignment:",F),me("Erreur lors de l'affectation","error")}C(I,!1),C(N,null),C(B,0),C(y,"")}function le(){C(T,!1),C(I,!1),C(N,null),C(B,0),C(y,"")}async function Oe(M,z,H,F,fe){try{if(!(await fetch(`/api/specific-assignments/${M}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete assignment");await $(),me(`Affectation supprimée pour ${H}`,"success")}catch(Ie){console.error("Error deleting specific assignment:",Ie),me("Erreur lors de la suppression de l'affectation","error")}}let xe=W(()=>[...o(),...i().map(M=>({...M,weekday:new Date(M.date).getDay()===0?6:new Date(M.date).getDay()-1,is_specific_date:M.source==="manual"}))]),ut=W(()=>c(xe).length>0&&a().length>0?x.map((M,z)=>{const H=P(z,"ouverture").concat(P(z,"fermeture")),F=S(z);return{uniqueAbsentMembers:[...H,...F].filter((xt,yt,At)=>At.findIndex(or=>or.member_id===xt.member_id)===yt)}}):x.map(()=>({uniqueAbsentMembers:[]})));var Pe=Oi(),ue=te(Pe),We=h(ue),Re=h(We);const ce=W(g);fn(Re,{get title(){return`Planning Semaine ${c(ce)??""}`},get startDate(){return _()[0]},get endDate(){return _()[6]}});var Ne=k(Re,2),wt=h(Ne);vn(wt,{get isLoading(){return s()},get error(){return l()},children:(M,z)=>{Ta(M,{children:(H,F)=>{var fe=Li(),Ie=te(fe);_r(Ie,{});var xt=k(Ie,2);ke(xt,17,()=>x,Be,(ye,ft,vt)=>{_r(ye,{children:(mt,sr)=>{Da(mt,{get day(){return c(ft)},get date(){return _()[vt]}})}})});var yt=k(xt,2);qt(yt,{children:(ye,ft)=>{pr(ye,{slotType:"ouverture"})},$$slots:{default:!0}});var At=k(yt,2);ke(At,17,()=>x,Be,(ye,ft,vt)=>{Vt(ye,{children:(mt,sr)=>{zn(mt,{get assignments(){return c(xe)},slotType:"ouverture",dayIndex:vt,get weeklyAbsences(){return a()},isMemberAbsent:L,getAbsencePeriod:d,onMarkAbsent:V,onAddMember:ie,onDeleteSpecificAssignment:Oe})}})});var or=k(At,2);qt(or,{children:(ye,ft)=>{pr(ye,{slotType:"fermeture"})},$$slots:{default:!0}});var mn=k(or,2);ke(mn,17,()=>x,Be,(ye,ft,vt)=>{Vt(ye,{children:(mt,sr)=>{zn(mt,{get assignments(){return c(xe)},slotType:"fermeture",dayIndex:vt,get weeklyAbsences(){return a()},isMemberAbsent:L,getAbsencePeriod:d,onMarkAbsent:V,onAddMember:ie,onDeleteSpecificAssignment:Oe})}})});var gn=k(mn,2);qt(gn,{children:(ye,ft)=>{ai(ye,{title:"Absences",iconPath:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"})},$$slots:{default:!0}});var Pa=k(gn,2);ke(Pa,17,()=>x,Be,(ye,ft,vt)=>{const mt=W(()=>c(ut)[vt]||{uniqueAbsentMembers:[]});Vt(ye,{children:(sr,Ki)=>{li(sr,{get absentMembers(){return c(mt).uniqueAbsentMembers},getAbsencePeriod:d})}})}),D(H,fe)}})},$$slots:{default:!0}});var ct=k(ue,2);const Ot=W(()=>{var M;return c(A)>=0?(M=_()[c(A)])==null?void 0:M.toLocaleDateString("fr-FR"):""});hi(ct,{get show(){return c(p)},get memberName(){return c(w)},get date(){return c(Ot)},get dayIndex(){return c(A)},$$events:{confirm:Q,cancel:q}});var Se=k(ct,2);const he=W(()=>c(T)?j(c(B)):[]),Qe=W(()=>i().map(M=>({...M,weekday:new Date(M.date).getDay()===0?6:new Date(M.date).getDay()-1})));La(Se,{get show(){return c(T)},get members(){return c(O)},get assignments(){return o()},get selectedDay(){return c(B)},get selectedSlot(){return c(y)},get absentMembers(){return c(he)},get specificAssignments(){return c(Qe)},$$events:{select:X,close:le}});var dt=k(Se,2);const Pt=W(()=>{var M;return c(B)>=0?(M=_()[c(B)])==null?void 0:M.toLocaleDateString("fr-FR"):""});Ci(dt,{get isOpen(){return c(I)},get member(){return c(N)},get dayIndex(){return c(B)},get date(){return c(Pt)},get slotType(){return c(y)},onConfirm:ne,onCancel:le}),D(e,Pe),oe(),n()}var Ii=(e,t)=>t.onAdd(t.dayIndex,t.slotType),ji=R('<div class="flex flex-col flex-wrap gap-4 justify-center items-center w-full h-full"><!> <button type="button" class="flex justify-center items-center w-6 h-6 bg-gradient-to-br rounded-full border shadow-lg backdrop-blur-sm transition-all duration-300 from-slate-600/80 to-slate-700/80 hover:from-slate-500/90 hover:to-slate-600/90 focus:outline-none focus:ring-2 focus:ring-slate-500/50 shadow-slate-500/25 hover:shadow-slate-500/40 hover:scale-110 border-slate-400/30"><span class="sr-only">Ajouter membre</span> <!></button></div>');function Fn(e,t){ae(t,!0);function r(s){setTimeout(()=>{t.onRemove(s)},200)}var n=ji(),a=h(n);ke(a,17,()=>t.assignments.filter(s=>s.weekday===t.dayIndex&&s.slot_type===t.slotType),s=>s.id,(s,l)=>{Cr(s,{get text(){return c(l).first_name},showButton:!0,buttonGradient:"from-red-400/100 to-red-700",buttonHoverGradient:"hover:from-red-400/90 hover:to-red-500/90",buttonRing:"focus:ring-red-500/50",buttonIcon:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z",buttonTooltip:"Supprimer",onClick:()=>r(c(l).id)})});var o=k(a,2);o.__click=[Ii,t];var i=k(h(o),2);Lt(i,{name:"plus",size:"w-3 h-3",className:"text-white"}),D(e,n),oe()}lt(["click"]);var Ri=R("<!> <!> <!> <!> <!> <!>",1),Ni=R('<div class="py-10"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><!> <div class="mt-8"><!></div></div></div> <!>',1);function zi(e,t){ae(t,!0);const[r,n]=Sr(),a=()=>be(Bt,"$members",r),o=()=>be(Te,"$assignments",r),i=()=>be(et,"$isLoading",r),s=()=>be(tt,"$error",r);ar(()=>{cr.loadData()});const l=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];let u=J(!1),f=J(null),v=J(null);function d(w,A){console.log("Opening member selector:",{dayIndex:w,slotType:A}),C(v,w,!0),C(f,A,!0),C(u,!0),console.log("Selected values:",{selectedDay:c(v),selectedSlot:c(f)})}function m(){C(u,!1),C(f,null),C(v,null)}async function g(w){try{console.log("Assigning members:",{memberIds:w,selectedDay:c(v),selectedSlot:c(f)});const A=[],T=[];for(const y of w){const O=a().find(Q=>Q.id===y);if(!O)continue;const V={id:Date.now()+Math.random(),weekday:c(v),slot_type:c(f),member_id:y,first_name:O.first_name};A.push(V);const q=fetch("/api/assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({weekday:c(v),slot_type:c(f),member_id:y})}).then(async Q=>{if(Q.ok){const $=await Q.json();return $.first_name=O.first_name,{success:!0,optimistic:V,real:$}}else return{success:!1,optimistic:V}});T.push(q)}Te.update(y=>[...y,...A]);const I=await Promise.all(T),N=[],B=[];I.forEach(y=>{y.success?N.push(y):B.push(y.optimistic)}),Te.update(y=>{let O=y;return N.forEach(({optimistic:V,real:q})=>{O=O.map(Q=>Q.id===V.id?q:Q)}),B.forEach(V=>{O=O.filter(q=>q.id!==V.id)}),O}),B.length>0&&console.error(`Failed to assign ${B.length} members`),m()}catch(A){console.error("Error assigning members:",A),await cr.loadData()}}async function _(w){try{const A=o().find(I=>I.id===w);if(!A)return;Te.update(I=>I.filter(N=>N.id!==w));const T=await fetch(`/api/assignments/${w}`,{method:"DELETE"});if(!T.ok){Te.update(N=>[...N,A]);const I=await T.text();console.error("Failed to remove assignment:",T.status,I)}}catch(A){console.error("Error removing assignment:",A),await cr.loadData()}}var x=Ni(),L=te(x),j=h(L),P=h(j);fn(P,{title:"Gestion des Affectations",subtitle:"Configurez les affectations par défaut pour chaque créneau",icon:"M9.664 1.319a.75.75 0 01.672 0 41.059 41.059 0 018.198 5.424.75.75 0 01-.254 1.285 31.372 31.372 0 00-7.86 3.83.75.75 0 01-.84 0 31.508 31.508 0 00-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 013.305-2.033.75.75 0 00-.714-1.319 37 37 0 00-3.446 2.12A2.216 2.216 0 006 9.393v.38a31.293 31.293 0 00-4.28-1.746.75.75 0 01-.254-1.285 41.059 41.059 0 018.198-5.424zM6 11.459a29.848 29.848 0 00-2.455-1.158 41.029 41.029 0 00-.39 3.114.75.75 0 00.419.74c.528.256 1.046.53 1.554.82-.21-.899-.407-1.84-.407-2.81.68-.537 1.426-1.047 2.279-1.525v-.181zM14 11.459v.181c.853.478 1.598.988 2.279 1.525 0 .97-.197 1.911-.407 2.81.508-.29 1.026-.564 1.554-.82a.75.75 0 00.419-.74 41.029 41.029 0 00-.39-3.114 29.848 29.848 0 00-2.455 1.158z"});var S=k(P,2),p=h(S);vn(p,{get isLoading(){return i()},get error(){return s()},children:(w,A)=>{Ta(w,{children:(T,I)=>{var N=Ri(),B=te(N);_r(B,{});var y=k(B,2);ke(y,17,()=>l,Be,($,we)=>{_r($,{children:(ie,X)=>{Da(ie,{get day(){return c(we)}})}})});var O=k(y,2);qt(O,{children:($,we)=>{pr($,{slotType:"ouverture"})},$$slots:{default:!0}});var V=k(O,2);ke(V,17,()=>l,Be,($,we,ie)=>{Vt($,{children:(X,ne)=>{Fn(X,{get assignments(){return o()},slotType:"ouverture",dayIndex:ie,onRemove:_,onAdd:d})}})});var q=k(V,2);qt(q,{children:($,we)=>{pr($,{slotType:"fermeture"})},$$slots:{default:!0}});var Q=k(q,2);ke(Q,17,()=>l,Be,($,we,ie)=>{Vt($,{children:(X,ne)=>{Fn(X,{get assignments(){return o()},slotType:"fermeture",dayIndex:ie,onRemove:_,onAdd:d})}})}),D(T,N)}})},$$slots:{default:!0}});var E=k(L,2);La(E,{get show(){return c(u)},get members(){return a()},get assignments(){return o()},get selectedDay(){return c(v)},get selectedSlot(){return c(f)},$$events:{select:w=>g(w.detail.memberIds),close:m}}),D(e,x),oe(),n()}var Fi=R("<option> </option>"),Bi=R('<div class="p-6 text-center"><p class="text-slate-400">Aucune absence enregistrée</p></div>'),Hi=(e,t,r)=>t(c(r).id),qi=R('<tr class="hover:bg-slate-700/70 transition-all duration-300"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-8 w-8"><div class="h-8 w-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/25"><span class="text-sm font-medium text-white"> </span></div></div> <div class="ml-4"><div class="text-sm font-medium text-slate-100"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-slate-200"> </div></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500/50"><span class="sr-only">Supprimer</span> <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z" clip-rule="evenodd"></path></svg></button></td></tr>'),Vi=R('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-slate-700/50"><thead class="bg-gradient-to-r from-slate-800/70 to-slate-700/70 backdrop-blur-sm"><tr><th class="px-6 py-3 text-left text-xs font-medium text-slate-200 uppercase tracking-wider">Membre</th><th class="px-6 py-3 text-left text-xs font-medium text-slate-200 uppercase tracking-wider">Période</th><th class="px-6 py-3 text-right text-xs font-medium text-slate-200 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-gradient-to-br from-slate-800/50 to-slate-700/60 backdrop-blur-sm divide-y divide-slate-700/50"></tbody></table></div>'),Wi=R('<div class="bg-gradient-to-br from-slate-800/90 via-slate-900/95 to-slate-800/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-700/50 overflow-hidden"><div class="px-6 py-4 border-b border-slate-700/50 bg-gradient-to-r from-slate-800/80 to-slate-900/80 backdrop-blur-sm"><h3 class="text-lg font-medium text-transparent bg-gradient-to-r from-white to-slate-200 bg-clip-text">Liste des Absences</h3></div> <!></div>'),Gi=R('<div class="py-10"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><!> <div class="mt-8"><div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="lg:col-span-1"><div class="bg-gradient-to-br from-slate-800/90 via-slate-900/95 to-slate-800/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-700/50 p-6"><h3 class="text-lg font-medium text-transparent bg-gradient-to-r from-white to-slate-200 bg-clip-text mb-4">Ajouter une Absence</h3> <form class="space-y-4"><div><label for="member" class="block text-sm font-medium text-gray-300 mb-2">Membre</label> <select id="member" class="w-full px-3 py-2 bg-gradient-to-r from-slate-700/80 to-slate-600/80 backdrop-blur-sm border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all duration-300" required><option>Sélectionner un membre</option><!></select></div> <div><label for="startDate" class="block text-sm font-medium text-gray-300 mb-2">Date de début</label> <input id="startDate" type="date" class="w-full px-3 py-2 bg-gradient-to-r from-slate-700/80 to-slate-600/80 backdrop-blur-sm border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all duration-300" required/></div> <div><label for="endDate" class="block text-sm font-medium text-gray-300 mb-2">Date de fin</label> <input id="endDate" type="date" class="w-full px-3 py-2 bg-gradient-to-r from-slate-700/80 to-slate-600/80 backdrop-blur-sm border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all duration-300" required/></div> <button type="submit" class="w-full px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-400 hover:to-purple-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 hover:scale-105"> </button></form></div></div> <div class="lg:col-span-2"><!></div></div></div></div></div>');function Ui(e,t){ae(t,!0);const[r,n]=Sr(),a=()=>be(Bt,"$members",r),o=()=>be(Vr,"$isLoading",r),i=()=>be(gt,"$error",r),s=()=>be(dr,"$absences",r);ar(()=>{Ht.loadAbsences()});let l=J(""),u=J(""),f=J(""),v=J(!1);async function d(){if(!c(l)||!c(u)||!c(f)){me("Veuillez remplir tous les champs","error");return}if(new Date(c(u))>new Date(c(f))){me("La date de début doit être antérieure à la date de fin","error");return}C(v,!0);try{await Ht.createAbsence(parseInt(c(l)),c(u),c(f)),me("Absence ajoutée avec succès","success"),C(l,""),C(u,""),C(f,"")}catch{me("Erreur lors de l'ajout de l'absence","error")}finally{C(v,!1)}}async function m(X){if(confirm("Êtes-vous sûr de vouloir supprimer cette absence ?"))try{await Ht.deleteAbsence(X),me("Absence supprimée avec succès","success")}catch{me("Erreur lors de la suppression de l'absence","error")}}function g(X){return new Date(X).toLocaleDateString("fr-FR")}function _(X,ne){const le=g(X),Oe=g(ne);return le===Oe?le:`${le} - ${Oe}`}var x=Gi(),L=h(x),j=h(L);fn(j,{title:"Gestion des Absences",subtitle:"Gérer les périodes d'absence des membres"});var P=k(j,2),S=h(P),p=h(S),E=h(p),w=k(h(E),2),A=W(()=>as(d)),T=h(w),I=k(h(T),2),N=h(I);N.value=N.__value="";var B=k(N);ke(B,1,a,Be,(X,ne)=>{var le=Fi(),Oe=h(le),xe={};G(()=>{U(Oe,`${c(ne).first_name??""} ${c(ne).last_name??""}`),xe!==(xe=c(ne).id)&&(le.value=(le.__value=c(ne).id)??"")}),D(X,le)});var y=k(T,2),O=k(h(y),2),V=k(y,2),q=k(h(V),2),Q=k(V,2),$=h(Q),we=k(p,2),ie=h(we);vn(ie,{get isLoading(){return o()},get error(){return i()},children:(X,ne)=>{var le=Wi(),Oe=k(h(le),2);{var xe=Pe=>{var ue=Bi();D(Pe,ue)},ut=Pe=>{var ue=Vi(),We=h(ue),Re=k(h(We));ke(Re,5,s,ce=>ce.id,(ce,Ne)=>{var wt=qi(),ct=h(wt),Ot=h(ct),Se=h(Ot),he=h(Se),Qe=h(he),dt=h(Qe),Pt=k(Se,2),M=h(Pt),z=h(M),H=k(ct),F=h(H),fe=h(F),Ie=k(H),xt=h(Ie);xt.__click=[Hi,m,Ne],G((yt,At)=>{U(dt,yt),U(z,c(Ne).member_name),U(fe,At)},[()=>c(Ne).first_name.charAt(0),()=>_(c(Ne).start_date,c(Ne).end_date)]),D(ce,wt)}),D(Pe,ue)};ee(Oe,Pe=>{s().length===0?Pe(xe):Pe(ut,!1)})}D(X,le)},$$slots:{default:!0}}),G(()=>{Q.disabled=c(v),U($,c(v)?"Ajout en cours...":"Ajouter l'absence")}),br("submit",w,function(...X){var ne;(ne=c(A))==null||ne.apply(this,X)}),Qo(I,()=>c(l),X=>C(l,X)),Hr(O,()=>c(u),X=>C(u,X)),Hr(q,()=>c(f),X=>C(f,X)),D(e,x),oe(),n()}lt(["click"]);var Yi=R('<div class="min-h-screen bg-slate-900 dark relative overflow-hidden"><nav class="relative bg-gradient-to-r from-slate-800/90 to-slate-900/90 backdrop-blur-xl shadow-2xl border-b border-slate-700/50"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="flex h-16 justify-between"><div class="flex"><div class="flex flex-shrink-0 items-center"><h1 class="text-xl font-bold text-transparent bg-gradient-to-r from-white to-slate-200 bg-clip-text">Planning BCFK</h1></div> <div class="hidden sm:ml-6 sm:flex sm:space-x-8"><a href="/">Semaine Actuelle</a> <a href="/assignments">Gestion Affectations</a> <a href="/absences">Gestion Absences</a></div></div></div></div></nav> <main class="relative"><!></main></div>');function Ji(e){const[t,r]=Sr(),n=()=>be(cs,"$location",t),a={"/":Pi,"/assignments":zi,"/absences":Ui};var o=Yi(),i=h(o),s=h(i),l=h(s),u=h(l),f=k(h(u),2),v=h(f);_t(v,x=>Ge==null?void 0:Ge(x));var d=k(v,2);_t(d,x=>Ge==null?void 0:Ge(x));var m=k(d,2);_t(m,x=>Ge==null?void 0:Ge(x));var g=k(i,2),_=h(g);vs(_,{get routes(){return a}}),G(()=>{je(v,1,`inline-flex items-center border-b-2 px-4 pt-1 text-sm font-medium rounded-t-lg transition-all duration-300 ${n()==="/"?"border-indigo-400 text-white bg-gradient-to-t from-indigo-500/10 to-transparent":"border-transparent text-slate-300 hover:border-slate-400 hover:text-white hover:bg-gradient-to-t hover:from-slate-700/20 hover:to-transparent"}`),je(d,1,`inline-flex items-center border-b-2 px-4 pt-1 text-sm font-medium rounded-t-lg transition-all duration-300 ${n()==="/assignments"?"border-indigo-400 text-white bg-gradient-to-t from-indigo-500/10 to-transparent":"border-transparent text-slate-300 hover:border-slate-400 hover:text-white hover:bg-gradient-to-t hover:from-slate-700/20 hover:to-transparent"}`),je(m,1,`inline-flex items-center border-b-2 px-4 pt-1 text-sm font-medium rounded-t-lg transition-all duration-300 ${n()==="/absences"?"border-indigo-400 text-white bg-gradient-to-t from-indigo-500/10 to-transparent":"border-transparent text-slate-300 hover:border-slate-400 hover:text-white hover:bg-gradient-to-t hover:from-slate-700/20 hover:to-transparent"}`)}),D(e,o),r()}sn(Ji,{target:document.getElementById("app")});
//# sourceMappingURL=main-Cx_yDMwS.js.map
